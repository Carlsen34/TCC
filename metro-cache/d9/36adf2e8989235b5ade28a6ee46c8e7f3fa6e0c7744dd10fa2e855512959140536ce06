{"dependencies":[{"name":"../../Common","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var Common_1 = _$$_REQUIRE(_dependencyMap[0], \"../../Common\");\n\n  var logger = new Common_1.ConsoleLogger('CognitoCredentials');\n\n  var GoogleOAuth = function () {\n    function GoogleOAuth() {}\n\n    GoogleOAuth.prototype.refreshGoogleToken = function () {\n      var ga = window['gapi'] && window['gapi'].auth2 ? window['gapi'].auth2 : null;\n\n      if (!ga) {\n        logger.debug('no gapi auth2 available');\n        return Promise.reject('no gapi auth2 available');\n      }\n\n      return new Promise(function (res, rej) {\n        ga.getAuthInstance().then(function (googleAuth) {\n          if (!googleAuth) {\n            console.log('google Auth undefiend');\n            rej('google Auth undefiend');\n          }\n\n          var googleUser = googleAuth.currentUser.get();\n\n          if (googleUser.isSignedIn()) {\n            logger.debug('refreshing the google access token');\n            googleUser.reloadAuthResponse().then(function (authResponse) {\n              var id_token = authResponse.id_token,\n                  expires_at = authResponse.expires_at;\n              var profile = googleUser.getBasicProfile();\n              var user = {\n                email: profile.getEmail(),\n                name: profile.getName()\n              };\n              res({\n                token: id_token,\n                expires_at: expires_at\n              });\n            });\n          } else {\n            rej('User is not signed in with Google');\n          }\n        }).catch(function (err) {\n          logger.debug('Failed to refresh google token', err);\n          rej('Failed to refresh google token');\n        });\n      });\n    };\n\n    return GoogleOAuth;\n  }();\n\n  exports.default = GoogleOAuth;\n});","map":[[2,0,1,0],[4,0,2,0,"Object"],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,0],[4,24,2,22,"exports"],[4,31,2,0],[4,33,2,31],[4,45,2,0],[4,47,2,45],[5,0,2,47,"value"],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,0,2,45],[6,3,2,0],[8,0,15,0],[8,6,15,4,"Common_1"],[8,14,15,12],[8,17,15,15,"require"],[8,28,15,22],[8,63,15,0],[10,0,16,0],[10,6,16,4,"logger"],[10,12,16,10],[10,15,16,13],[10,19,16,17,"Common_1"],[10,27,16,25],[10,28,16,26,"ConsoleLogger"],[10,41,16,13],[10,42,16,40],[10,62,16,13],[10,63,16,0],[12,0,17,0],[12,6,17,4,"GoogleOAuth"],[12,17,17,15],[12,20,17,33],[12,32,17,45],[13,0,18,4],[13,13,18,13,"GoogleOAuth"],[13,24,18,4],[13,27,18,27],[13,28,19,5],[15,0,20,4,"GoogleOAuth"],[15,4,20,4,"GoogleOAuth"],[15,15,20,15],[15,16,20,16,"prototype"],[15,25,20,4],[15,26,20,26,"refreshGoogleToken"],[15,44,20,4],[15,47,20,47],[15,59,20,59],[16,0,21,8],[16,10,21,12,"ga"],[16,12,21,14],[16,15,21,17,"window"],[16,21,21,23],[16,22,21,24],[16,28,21,23],[16,29,21,17],[16,33,21,35,"window"],[16,39,21,41],[16,40,21,42],[16,46,21,41],[16,47,21,35],[16,48,21,50,"auth2"],[16,53,21,17],[16,56,21,58,"window"],[16,62,21,64],[16,63,21,65],[16,69,21,64],[16,70,21,58],[16,71,21,73,"auth2"],[16,76,21,17],[16,79,21,81],[16,83,21,8],[18,0,22,8],[18,10,22,12],[18,11,22,13,"ga"],[18,13,22,8],[18,15,22,17],[19,0,23,12,"logger"],[19,8,23,12,"logger"],[19,14,23,18],[19,15,23,19,"debug"],[19,20,23,12],[19,21,23,25],[19,46,23,12],[20,0,24,12],[20,15,24,19,"Promise"],[20,22,24,26],[20,23,24,27,"reject"],[20,29,24,19],[20,30,24,34],[20,55,24,19],[20,56,24,12],[21,0,25,9],[23,0,26,8],[23,13,26,15],[23,17,26,19,"Promise"],[23,24,26,15],[23,25,26,27],[23,35,26,37,"res"],[23,38,26,27],[23,40,26,42,"rej"],[23,43,26,27],[23,45,26,47],[24,0,27,12,"ga"],[24,8,27,12,"ga"],[24,10,27,14],[24,11,27,15,"getAuthInstance"],[24,26,27,12],[24,29,27,33,"then"],[24,33,27,12],[24,34,27,38],[24,44,27,48,"googleAuth"],[24,54,27,38],[24,56,27,60],[25,0,28,16],[25,14,28,20],[25,15,28,21,"googleAuth"],[25,25,28,16],[25,27,28,33],[26,0,29,20,"console"],[26,12,29,20,"console"],[26,19,29,27],[26,20,29,28,"log"],[26,23,29,20],[26,24,29,32],[26,47,29,20],[27,0,30,20,"rej"],[27,12,30,20,"rej"],[27,15,30,23],[27,16,30,24],[27,39,30,23],[27,40,30,20],[28,0,31,17],[30,0,32,16],[30,14,32,20,"googleUser"],[30,24,32,30],[30,27,32,33,"googleAuth"],[30,37,32,43],[30,38,32,44,"currentUser"],[30,49,32,33],[30,50,32,56,"get"],[30,53,32,33],[30,55,32,16],[32,0,34,16],[32,14,34,20,"googleUser"],[32,24,34,30],[32,25,34,31,"isSignedIn"],[32,35,34,20],[32,37,34,16],[32,39,34,45],[33,0,35,20,"logger"],[33,12,35,20,"logger"],[33,18,35,26],[33,19,35,27,"debug"],[33,24,35,20],[33,25,35,33],[33,61,35,20],[34,0,36,20,"googleUser"],[34,12,36,20,"googleUser"],[34,22,36,30],[34,23,36,31,"reloadAuthResponse"],[34,41,36,20],[34,44,37,25,"then"],[34,48,36,20],[34,49,37,30],[34,59,37,40,"authResponse"],[34,71,37,30],[34,73,37,54],[35,0,38,24],[35,18,38,28,"id_token"],[35,26,38,36],[35,29,38,39,"authResponse"],[35,41,38,51],[35,42,38,52,"id_token"],[35,50,38,24],[36,0,38,24],[36,18,38,62,"expires_at"],[36,28,38,72],[36,31,38,75,"authResponse"],[36,43,38,87],[36,44,38,88,"expires_at"],[36,54,38,24],[37,0,39,24],[37,18,39,28,"profile"],[37,25,39,35],[37,28,39,38,"googleUser"],[37,38,39,48],[37,39,39,49,"getBasicProfile"],[37,54,39,38],[37,56,39,24],[38,0,40,24],[38,18,40,28,"user"],[38,22,40,32],[38,25,40,35],[39,0,41,28,"email"],[39,16,41,28,"email"],[39,21,41,33],[39,23,41,35,"profile"],[39,30,41,42],[39,31,41,43,"getEmail"],[39,39,41,35],[39,41,40,35],[40,0,42,28,"name"],[40,16,42,28,"name"],[40,20,42,32],[40,22,42,34,"profile"],[40,29,42,41],[40,30,42,42,"getName"],[40,37,42,34],[41,0,40,35],[41,15,40,24],[42,0,44,24,"res"],[42,14,44,24,"res"],[42,17,44,27],[42,18,44,28],[43,0,44,30,"token"],[43,16,44,30,"token"],[43,21,44,35],[43,23,44,37,"id_token"],[43,31,44,28],[44,0,44,47,"expires_at"],[44,16,44,47,"expires_at"],[44,26,44,57],[44,28,44,59,"expires_at"],[45,0,44,28],[45,15,44,27],[45,16,44,24],[46,0,45,21],[46,13,36,20],[47,0,46,17],[47,11,34,16],[47,17,47,21],[48,0,48,20,"rej"],[48,12,48,20,"rej"],[48,15,48,23],[48,16,48,24],[48,51,48,23],[48,52,48,20],[49,0,49,17],[50,0,50,13],[50,9,27,12],[50,11,50,15,"catch"],[50,16,27,12],[50,17,50,21],[50,27,50,31,"err"],[50,30,50,21],[50,32,50,36],[51,0,51,16,"logger"],[51,10,51,16,"logger"],[51,16,51,22],[51,17,51,23,"debug"],[51,22,51,16],[51,23,51,29],[51,55,51,16],[51,57,51,63,"err"],[51,60,51,16],[52,0,52,16,"rej"],[52,10,52,16,"rej"],[52,13,52,19],[52,14,52,20],[52,46,52,19],[52,47,52,16],[53,0,53,13],[53,9,27,12],[54,0,54,9],[54,7,26,15],[54,8,26,8],[55,0,55,5],[55,5,20,4],[57,0,56,4],[57,11,56,11,"GoogleOAuth"],[57,22,56,4],[58,0,57,1],[58,3,17,33],[58,5,17,0],[60,0,58,0,"exports"],[60,2,58,0,"exports"],[60,9,58,7],[60,10,58,8,"default"],[60,17,58,0],[60,20,58,18,"GoogleOAuth"],[60,31,58,0]]},"type":"js/module"}]}