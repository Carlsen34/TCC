{"dependencies":[{"name":"../core","data":{"isAsync":false}},{"name":"../rds/signer","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var AWS = _$$_REQUIRE(_dependencyMap[0], \"../core\");\n\n  _$$_REQUIRE(_dependencyMap[1], \"../rds/signer\");\n\n  var crossRegionOperations = ['copyDBSnapshot', 'createDBInstanceReadReplica', 'createDBCluster', 'copyDBClusterSnapshot'];\n  AWS.util.update(AWS.RDS.prototype, {\n    setupRequestListeners: function setupRequestListeners(request) {\n      if (crossRegionOperations.indexOf(request.operation) !== -1 && request.params.SourceRegion) {\n        request.params = AWS.util.copy(request.params);\n\n        if (request.params.PreSignedUrl || request.params.SourceRegion === this.config.region) {\n          delete request.params.SourceRegion;\n        } else {\n          var doesParamValidation = !!this.config.paramValidation;\n\n          if (doesParamValidation) {\n            request.removeListener('validate', AWS.EventListeners.Core.VALIDATE_PARAMETERS);\n          }\n\n          request.onAsync('validate', this.buildCrossRegionPresignedUrl);\n\n          if (doesParamValidation) {\n            request.addListener('validate', AWS.EventListeners.Core.VALIDATE_PARAMETERS);\n          }\n        }\n      }\n    },\n    buildCrossRegionPresignedUrl: function buildCrossRegionPresignedUrl(req, done) {\n      var config = AWS.util.copy(req.service.config);\n      config.region = req.params.SourceRegion;\n      delete req.params.SourceRegion;\n      delete config.endpoint;\n      delete config.params;\n      config.signatureVersion = 'v4';\n      var destinationRegion = req.service.config.region;\n      var svc = new req.service.constructor(config);\n      var newReq = svc[req.operation](AWS.util.copy(req.params));\n      newReq.on('build', function addDestinationRegionParam(request) {\n        var httpRequest = request.httpRequest;\n        httpRequest.params.DestinationRegion = destinationRegion;\n        httpRequest.body = AWS.util.queryParamsToString(httpRequest.params);\n      });\n      newReq.presign(function (err, url) {\n        if (err) done(err);else {\n          req.params.PreSignedUrl = url;\n          done();\n        }\n      });\n    }\n  });\n});","map":[[2,0,1,0],[2,6,1,4,"AWS"],[2,9,1,7],[2,12,1,10,"require"],[2,23,1,17],[2,53,1,0],[4,0,2,0,"require"],[4,2,2,0,"require"],[4,13,2,7],[4,49,2,0],[6,0,6,1],[6,6,6,5,"crossRegionOperations"],[6,27,6,26],[6,30,6,29],[6,31,6,30],[6,47,6,29],[6,49,6,48],[6,78,6,29],[6,80,6,79],[6,97,6,29],[6,99,6,98],[6,122,6,29],[6,123,6,1],[7,0,8,1,"AWS"],[7,2,8,1,"AWS"],[7,5,8,4],[7,6,8,5,"util"],[7,10,8,1],[7,11,8,10,"update"],[7,17,8,1],[7,18,8,17,"AWS"],[7,21,8,20],[7,22,8,21,"RDS"],[7,25,8,17],[7,26,8,25,"prototype"],[7,35,8,1],[7,37,8,36],[8,0,12,3,"setupRequestListeners"],[8,4,12,3,"setupRequestListeners"],[8,25,12,24],[8,27,12,26],[8,36,12,35,"setupRequestListeners"],[8,57,12,26],[8,58,12,57,"request"],[8,65,12,26],[8,67,12,66],[9,0,13,5],[9,10,13,9,"crossRegionOperations"],[9,31,13,30],[9,32,13,31,"indexOf"],[9,39,13,9],[9,40,13,39,"request"],[9,47,13,46],[9,48,13,47,"operation"],[9,57,13,9],[9,63,13,62],[9,64,13,63],[9,65,13,9],[9,69,14,9,"request"],[9,76,14,16],[9,77,14,17,"params"],[9,83,14,9],[9,84,14,24,"SourceRegion"],[9,96,13,5],[9,98,14,38],[10,0,15,7,"request"],[10,8,15,7,"request"],[10,15,15,14],[10,16,15,15,"params"],[10,22,15,7],[10,25,15,24,"AWS"],[10,28,15,27],[10,29,15,28,"util"],[10,33,15,24],[10,34,15,33,"copy"],[10,38,15,24],[10,39,15,38,"request"],[10,46,15,45],[10,47,15,46,"params"],[10,53,15,24],[10,54,15,7],[12,0,16,7],[12,12,16,11,"request"],[12,19,16,18],[12,20,16,19,"params"],[12,26,16,11],[12,27,16,26,"PreSignedUrl"],[12,39,16,11],[12,43,17,11,"request"],[12,50,17,18],[12,51,17,19,"params"],[12,57,17,11],[12,58,17,26,"SourceRegion"],[12,70,17,11],[12,75,17,43],[12,80,17,48,"config"],[12,86,17,43],[12,87,17,55,"region"],[12,93,16,7],[12,95,17,63],[13,0,18,9],[13,17,18,16,"request"],[13,24,18,23],[13,25,18,24,"params"],[13,31,18,16],[13,32,18,31,"SourceRegion"],[13,44,18,9],[14,0,19,8],[14,9,16,7],[14,15,19,14],[15,0,20,9],[15,14,20,13,"doesParamValidation"],[15,33,20,32],[15,36,20,35],[15,37,20,36],[15,38,20,37],[15,43,20,42,"config"],[15,49,20,37],[15,50,20,49,"paramValidation"],[15,65,20,9],[17,0,22,9],[17,14,22,13,"doesParamValidation"],[17,33,22,9],[17,35,22,34],[18,0,23,11,"request"],[18,12,23,11,"request"],[18,19,23,18],[18,20,23,19,"removeListener"],[18,34,23,11],[18,35,23,34],[18,45,23,11],[18,47,23,46,"AWS"],[18,50,23,49],[18,51,23,50,"EventListeners"],[18,65,23,46],[18,66,23,65,"Core"],[18,70,23,46],[18,71,23,70,"VALIDATE_PARAMETERS"],[18,90,23,11],[19,0,24,10],[21,0,25,9,"request"],[21,10,25,9,"request"],[21,17,25,16],[21,18,25,17,"onAsync"],[21,25,25,9],[21,26,25,25],[21,36,25,9],[21,38,25,37],[21,43,25,42,"buildCrossRegionPresignedUrl"],[21,71,25,9],[23,0,26,9],[23,14,26,13,"doesParamValidation"],[23,33,26,9],[23,35,26,34],[24,0,27,11,"request"],[24,12,27,11,"request"],[24,19,27,18],[24,20,27,19,"addListener"],[24,31,27,11],[24,32,27,31],[24,42,27,11],[24,44,27,43,"AWS"],[24,47,27,46],[24,48,27,47,"EventListeners"],[24,62,27,43],[24,63,27,62,"Core"],[24,67,27,43],[24,68,27,67,"VALIDATE_PARAMETERS"],[24,87,27,11],[25,0,28,10],[26,0,29,8],[27,0,30,6],[28,0,31,4],[28,5,8,36],[29,0,36,3,"buildCrossRegionPresignedUrl"],[29,4,36,3,"buildCrossRegionPresignedUrl"],[29,32,36,31],[29,34,36,33],[29,43,36,42,"buildCrossRegionPresignedUrl"],[29,71,36,33],[29,72,36,71,"req"],[29,75,36,33],[29,77,36,76,"done"],[29,81,36,33],[29,83,36,82],[30,0,37,5],[30,10,37,9,"config"],[30,16,37,15],[30,19,37,18,"AWS"],[30,22,37,21],[30,23,37,22,"util"],[30,27,37,18],[30,28,37,27,"copy"],[30,32,37,18],[30,33,37,32,"req"],[30,36,37,35],[30,37,37,36,"service"],[30,44,37,32],[30,45,37,44,"config"],[30,51,37,18],[30,52,37,5],[31,0,38,5,"config"],[31,6,38,5,"config"],[31,12,38,11],[31,13,38,12,"region"],[31,19,38,5],[31,22,38,21,"req"],[31,25,38,24],[31,26,38,25,"params"],[31,32,38,21],[31,33,38,32,"SourceRegion"],[31,45,38,5],[32,0,39,5],[32,13,39,12,"req"],[32,16,39,15],[32,17,39,16,"params"],[32,23,39,12],[32,24,39,23,"SourceRegion"],[32,36,39,5],[33,0,40,5],[33,13,40,12,"config"],[33,19,40,18],[33,20,40,19,"endpoint"],[33,28,40,5],[34,0,42,5],[34,13,42,12,"config"],[34,19,42,18],[34,20,42,19,"params"],[34,26,42,5],[35,0,43,5,"config"],[35,6,43,5,"config"],[35,12,43,11],[35,13,43,12,"signatureVersion"],[35,29,43,5],[35,32,43,31],[35,36,43,5],[36,0,44,5],[36,10,44,9,"destinationRegion"],[36,27,44,26],[36,30,44,29,"req"],[36,33,44,32],[36,34,44,33,"service"],[36,41,44,29],[36,42,44,41,"config"],[36,48,44,29],[36,49,44,48,"region"],[36,55,44,5],[37,0,46,5],[37,10,46,9,"svc"],[37,13,46,12],[37,16,46,15],[37,20,46,19,"req"],[37,23,46,22],[37,24,46,23,"service"],[37,31,46,19],[37,32,46,31,"constructor"],[37,43,46,15],[37,44,46,43,"config"],[37,50,46,15],[37,51,46,5],[38,0,47,5],[38,10,47,9,"newReq"],[38,16,47,15],[38,19,47,18,"svc"],[38,22,47,21],[38,23,47,22,"req"],[38,26,47,25],[38,27,47,26,"operation"],[38,36,47,21],[38,37,47,18],[38,38,47,37,"AWS"],[38,41,47,40],[38,42,47,41,"util"],[38,46,47,37],[38,47,47,46,"copy"],[38,51,47,37],[38,52,47,51,"req"],[38,55,47,54],[38,56,47,55,"params"],[38,62,47,37],[38,63,47,18],[38,64,47,5],[39,0,48,5,"newReq"],[39,6,48,5,"newReq"],[39,12,48,11],[39,13,48,12,"on"],[39,15,48,5],[39,16,48,15],[39,23,48,5],[39,25,48,24],[39,34,48,33,"addDestinationRegionParam"],[39,59,48,24],[39,60,48,59,"request"],[39,67,48,24],[39,69,48,68],[40,0,49,7],[40,12,49,11,"httpRequest"],[40,23,49,22],[40,26,49,25,"request"],[40,33,49,32],[40,34,49,33,"httpRequest"],[40,45,49,7],[41,0,50,7,"httpRequest"],[41,8,50,7,"httpRequest"],[41,19,50,18],[41,20,50,19,"params"],[41,26,50,7],[41,27,50,26,"DestinationRegion"],[41,44,50,7],[41,47,50,46,"destinationRegion"],[41,64,50,7],[42,0,51,7,"httpRequest"],[42,8,51,7,"httpRequest"],[42,19,51,18],[42,20,51,19,"body"],[42,24,51,7],[42,27,51,26,"AWS"],[42,30,51,29],[42,31,51,30,"util"],[42,35,51,26],[42,36,51,35,"queryParamsToString"],[42,55,51,26],[42,56,51,55,"httpRequest"],[42,67,51,66],[42,68,51,67,"params"],[42,74,51,26],[42,75,51,7],[43,0,52,6],[43,7,48,5],[44,0,53,5,"newReq"],[44,6,53,5,"newReq"],[44,12,53,11],[44,13,53,12,"presign"],[44,20,53,5],[44,21,53,20],[44,31,53,29,"err"],[44,34,53,20],[44,36,53,34,"url"],[44,39,53,20],[44,41,53,39],[45,0,54,7],[45,12,54,11,"err"],[45,15,54,7],[45,17,54,16,"done"],[45,21,54,20],[45,22,54,21,"err"],[45,25,54,20],[45,26,54,16],[45,27,54,7],[45,32,55,12],[46,0,56,9,"req"],[46,10,56,9,"req"],[46,13,56,12],[46,14,56,13,"params"],[46,20,56,9],[46,21,56,20,"PreSignedUrl"],[46,33,56,9],[46,36,56,35,"url"],[46,39,56,9],[47,0,57,9,"done"],[47,10,57,9,"done"],[47,14,57,13],[48,0,58,8],[49,0,59,6],[49,7,53,5],[50,0,60,4],[51,0,8,36],[51,3,8,1]]},"type":"js/module"}]}