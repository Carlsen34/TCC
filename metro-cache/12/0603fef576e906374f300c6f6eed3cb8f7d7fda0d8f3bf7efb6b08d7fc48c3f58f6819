{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"./Client","data":{"isAsync":false}},{"name":"./CognitoUser","data":{"isAsync":false}},{"name":"./StorageHelper","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n\n  var _classCallCheck2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\"));\n\n  var _createClass2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/createClass\"));\n\n  var _Client = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[3], \"./Client\"));\n\n  var _CognitoUser = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[4], \"./CognitoUser\"));\n\n  var _StorageHelper = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[5], \"./StorageHelper\"));\n\n  var CognitoUserPool = function () {\n    function CognitoUserPool(data) {\n      (0, _classCallCheck2.default)(this, CognitoUserPool);\n\n      var _ref = data || {},\n          UserPoolId = _ref.UserPoolId,\n          ClientId = _ref.ClientId,\n          endpoint = _ref.endpoint,\n          AdvancedSecurityDataCollectionFlag = _ref.AdvancedSecurityDataCollectionFlag;\n\n      if (!UserPoolId || !ClientId) {\n        throw new Error('Both UserPoolId and ClientId are required.');\n      }\n\n      if (!/^[\\w-]+_.+$/.test(UserPoolId)) {\n        throw new Error('Invalid UserPoolId format.');\n      }\n\n      var region = UserPoolId.split('_')[0];\n      this.userPoolId = UserPoolId;\n      this.clientId = ClientId;\n      this.client = new _Client.default(region, endpoint);\n      this.advancedSecurityDataCollectionFlag = AdvancedSecurityDataCollectionFlag !== false;\n      this.storage = data.Storage || new _StorageHelper.default().getStorage();\n    }\n\n    (0, _createClass2.default)(CognitoUserPool, [{\n      key: \"getUserPoolId\",\n      value: function getUserPoolId() {\n        return this.userPoolId;\n      }\n    }, {\n      key: \"getClientId\",\n      value: function getClientId() {\n        return this.clientId;\n      }\n    }, {\n      key: \"signUp\",\n      value: function signUp(username, password, userAttributes, validationData, callback) {\n        var _this = this;\n\n        var jsonReq = {\n          ClientId: this.clientId,\n          Username: username,\n          Password: password,\n          UserAttributes: userAttributes,\n          ValidationData: validationData\n        };\n\n        if (this.getUserContextData(username)) {\n          jsonReq.UserContextData = this.getUserContextData(username);\n        }\n\n        this.client.request('SignUp', jsonReq, function (err, data) {\n          if (err) {\n            return callback(err, null);\n          }\n\n          var cognitoUser = {\n            Username: username,\n            Pool: _this,\n            Storage: _this.storage\n          };\n          var returnData = {\n            user: new _CognitoUser.default(cognitoUser),\n            userConfirmed: data.UserConfirmed,\n            userSub: data.UserSub\n          };\n          return callback(null, returnData);\n        });\n      }\n    }, {\n      key: \"getCurrentUser\",\n      value: function getCurrentUser() {\n        var lastUserKey = \"CognitoIdentityServiceProvider.\" + this.clientId + \".LastAuthUser\";\n        var lastAuthUser = this.storage.getItem(lastUserKey);\n\n        if (lastAuthUser) {\n          var cognitoUser = {\n            Username: lastAuthUser,\n            Pool: this,\n            Storage: this.storage\n          };\n          return new _CognitoUser.default(cognitoUser);\n        }\n\n        return null;\n      }\n    }, {\n      key: \"getUserContextData\",\n      value: function getUserContextData(username) {\n        if (typeof AmazonCognitoAdvancedSecurityData === 'undefined') {\n          return undefined;\n        }\n\n        var amazonCognitoAdvancedSecurityDataConst = AmazonCognitoAdvancedSecurityData;\n\n        if (this.advancedSecurityDataCollectionFlag) {\n          var advancedSecurityData = amazonCognitoAdvancedSecurityDataConst.getData(username, this.userPoolId, this.clientId);\n\n          if (advancedSecurityData) {\n            var userContextData = {\n              EncodedData: advancedSecurityData\n            };\n            return userContextData;\n          }\n        }\n\n        return {};\n      }\n    }]);\n    return CognitoUserPool;\n  }();\n\n  exports.default = CognitoUserPool;\n});","map":[[13,0,18,0],[15,0,19,0],[17,0,20,0],[19,6,23,21,"CognitoUserPool"],[19,21],[20,0,35,2],[20,29,35,14,"data"],[20,33,35,2],[20,35,35,20],[21,0,35,20],[23,0,35,20],[23,17,36,83,"data"],[23,21,36,87],[23,25,36,91],[23,27,35,20],[24,0,35,20],[24,10,36,12,"UserPoolId"],[24,20,35,20],[24,28,36,12,"UserPoolId"],[24,38,35,20],[25,0,35,20],[25,10,36,24,"ClientId"],[25,18,35,20],[25,26,36,24,"ClientId"],[25,34,35,20],[26,0,35,20],[26,10,36,34,"endpoint"],[26,18,35,20],[26,26,36,34,"endpoint"],[26,34,35,20],[27,0,35,20],[27,10,36,44,"AdvancedSecurityDataCollectionFlag"],[27,44,35,20],[27,52,36,44,"AdvancedSecurityDataCollectionFlag"],[27,86,35,20],[29,0,37,4],[29,10,37,8],[29,11,37,9,"UserPoolId"],[29,21,37,8],[29,25,37,23],[29,26,37,24,"ClientId"],[29,34,37,4],[29,36,37,34],[30,0,38,6],[30,14,38,12],[30,18,38,16,"Error"],[30,23,38,12],[30,24,38,22],[30,68,38,12],[30,69,38,6],[31,0,39,5],[33,0,40,4],[33,10,40,8],[33,11,40,9],[33,25,40,23,"test"],[33,29,40,9],[33,30,40,28,"UserPoolId"],[33,40,40,9],[33,41,40,4],[33,43,40,41],[34,0,41,6],[34,14,41,12],[34,18,41,16,"Error"],[34,23,41,12],[34,24,41,22],[34,52,41,12],[34,53,41,6],[35,0,42,5],[37,0,43,4],[37,10,43,10,"region"],[37,16,43,16],[37,19,43,19,"UserPoolId"],[37,29,43,29],[37,30,43,30,"split"],[37,35,43,19],[37,36,43,36],[37,39,43,19],[37,41,43,41],[37,42,43,19],[37,43,43,4],[38,0,45,4],[38,11,45,9,"userPoolId"],[38,21,45,4],[38,24,45,22,"UserPoolId"],[38,34,45,4],[39,0,46,4],[39,11,46,9,"clientId"],[39,19,46,4],[39,22,46,20,"ClientId"],[39,30,46,4],[40,0,48,4],[40,11,48,9,"client"],[40,17,48,4],[40,20,48,18],[40,24,48,22,"Client"],[40,39,48,18],[40,40,48,29,"region"],[40,46,48,18],[40,48,48,37,"endpoint"],[40,56,48,18],[40,57,48,4],[41,0,54,4],[41,11,54,9,"advancedSecurityDataCollectionFlag"],[41,45,54,4],[41,48,54,46,"AdvancedSecurityDataCollectionFlag"],[41,82,54,80],[41,87,54,85],[41,92,54,4],[42,0,56,4],[42,11,56,9,"storage"],[42,18,56,4],[42,21,56,19,"data"],[42,25,56,23],[42,26,56,24,"Storage"],[42,33,56,19],[42,37,56,35],[42,41,56,39,"StorageHelper"],[42,63,56,35],[42,66,56,55,"getStorage"],[42,76,56,35],[42,78,56,4],[43,0,57,3],[47,38,62,18],[48,0,63,4],[48,15,63,11],[48,20,63,16,"userPoolId"],[48,30,63,4],[49,0,64,3],[52,36,69,16],[53,0,70,4],[53,15,70,11],[53,20,70,16,"clientId"],[53,28,70,4],[54,0,71,3],[57,29,87,9,"username"],[57,37],[57,39,87,19,"password"],[57,47],[57,49,87,29,"userAttributes"],[57,63],[57,65,87,45,"validationData"],[57,79],[57,81,87,61,"callback"],[57,89],[57,91,87,71],[58,0,87,71],[60,0,88,4],[60,12,88,10,"jsonReq"],[60,19,88,17],[60,22,88,20],[61,0,89,6,"ClientId"],[61,10,89,6,"ClientId"],[61,18,89,14],[61,20,89,16],[61,25,89,21,"clientId"],[61,33,88,20],[62,0,90,6,"Username"],[62,10,90,6,"Username"],[62,18,90,14],[62,20,90,16,"username"],[62,28,88,20],[63,0,91,6,"Password"],[63,10,91,6,"Password"],[63,18,91,14],[63,20,91,16,"password"],[63,28,88,20],[64,0,92,6,"UserAttributes"],[64,10,92,6,"UserAttributes"],[64,24,92,20],[64,26,92,22,"userAttributes"],[64,40,88,20],[65,0,93,6,"ValidationData"],[65,10,93,6,"ValidationData"],[65,24,93,20],[65,26,93,22,"validationData"],[66,0,88,20],[66,9,88,4],[68,0,95,4],[68,12,95,8],[68,17,95,13,"getUserContextData"],[68,35,95,8],[68,36,95,32,"username"],[68,44,95,8],[68,45,95,4],[68,47,95,43],[69,0,96,6,"jsonReq"],[69,10,96,6,"jsonReq"],[69,17,96,13],[69,18,96,14,"UserContextData"],[69,33,96,6],[69,36,96,32],[69,41,96,37,"getUserContextData"],[69,59,96,32],[69,60,96,56,"username"],[69,68,96,32],[69,69,96,6],[70,0,97,5],[72,0,98,4],[72,13,98,9,"client"],[72,19,98,4],[72,20,98,16,"request"],[72,27,98,4],[72,28,98,24],[72,36,98,4],[72,38,98,34,"jsonReq"],[72,45,98,4],[72,47,98,43],[72,57,98,44,"err"],[72,60,98,43],[72,62,98,49,"data"],[72,66,98,43],[72,68,98,58],[73,0,99,6],[73,14,99,10,"err"],[73,17,99,6],[73,19,99,15],[74,0,100,8],[74,19,100,15,"callback"],[74,27,100,23],[74,28,100,24,"err"],[74,31,100,23],[74,33,100,29],[74,37,100,23],[74,38,100,8],[75,0,101,7],[77,0,103,6],[77,14,103,12,"cognitoUser"],[77,25,103,23],[77,28,103,26],[78,0,104,8,"Username"],[78,12,104,8,"Username"],[78,20,104,16],[78,22,104,18,"username"],[78,30,103,26],[79,0,105,8,"Pool"],[79,12,105,8,"Pool"],[79,16,105,12],[79,18,105,14],[79,23,103,26],[80,0,106,8,"Storage"],[80,12,106,8,"Storage"],[80,19,106,15],[80,21,106,17],[80,26,106,21],[80,27,106,22,"storage"],[81,0,103,26],[81,11,103,6],[82,0,109,6],[82,14,109,12,"returnData"],[82,24,109,22],[82,27,109,25],[83,0,110,8,"user"],[83,12,110,8,"user"],[83,16,110,12],[83,18,110,14],[83,22,110,18,"CognitoUser"],[83,42,110,14],[83,43,110,30,"cognitoUser"],[83,54,110,14],[83,55,109,25],[84,0,111,8,"userConfirmed"],[84,12,111,8,"userConfirmed"],[84,25,111,21],[84,27,111,23,"data"],[84,31,111,27],[84,32,111,28,"UserConfirmed"],[84,45,109,25],[85,0,112,8,"userSub"],[85,12,112,8,"userSub"],[85,19,112,15],[85,21,112,17,"data"],[85,25,112,21],[85,26,112,22,"UserSub"],[86,0,109,25],[86,11,109,6],[87,0,115,6],[87,17,115,13,"callback"],[87,25,115,21],[87,26,115,22],[87,30,115,21],[87,32,115,28,"returnData"],[87,42,115,21],[87,43,115,6],[88,0,116,5],[88,9,98,4],[89,0,117,3],[92,39,125,19],[93,0,126,4],[93,12,126,10,"lastUserKey"],[93,23,126,21],[93,62,126,58],[93,67,126,63,"clientId"],[93,75,126,21],[93,93,126,4],[94,0,128,4],[94,12,128,10,"lastAuthUser"],[94,24,128,22],[94,27,128,25],[94,32,128,30,"storage"],[94,39,128,25],[94,40,128,38,"getItem"],[94,47,128,25],[94,48,128,46,"lastUserKey"],[94,59,128,25],[94,60,128,4],[96,0,129,4],[96,12,129,8,"lastAuthUser"],[96,24,129,4],[96,26,129,22],[97,0,130,6],[97,14,130,12,"cognitoUser"],[97,25,130,23],[97,28,130,26],[98,0,131,8,"Username"],[98,12,131,8,"Username"],[98,20,131,16],[98,22,131,18,"lastAuthUser"],[98,34,130,26],[99,0,132,8,"Pool"],[99,12,132,8,"Pool"],[99,16,132,12],[99,18,132,14],[99,22,130,26],[100,0,133,8,"Storage"],[100,12,133,8,"Storage"],[100,19,133,15],[100,21,133,17],[100,26,133,22,"storage"],[101,0,130,26],[101,11,130,6],[102,0,136,6],[102,17,136,13],[102,21,136,17,"CognitoUser"],[102,41,136,13],[102,42,136,29,"cognitoUser"],[102,53,136,13],[102,54,136,6],[103,0,137,5],[105,0,139,4],[105,15,139,11],[105,19,139,4],[106,0,140,3],[109,41,150,21,"username"],[109,49],[109,51,150,31],[110,0,151,4],[110,12,151,8],[110,19,151,15,"AmazonCognitoAdvancedSecurityData"],[110,52,151,8],[110,57,151,53],[110,68,151,4],[110,70,151,66],[111,0,152,6],[111,17,152,13,"undefined"],[111,26,152,6],[112,0,153,5],[114,0,155,4],[114,12,155,10,"amazonCognitoAdvancedSecurityDataConst"],[114,50,155,48],[114,53,155,51,"AmazonCognitoAdvancedSecurityData"],[114,86,155,4],[116,0,158,4],[116,12,158,8],[116,17,158,13,"advancedSecurityDataCollectionFlag"],[116,51,158,4],[116,53,158,49],[117,0,159,6],[117,14,159,12,"advancedSecurityData"],[117,34,159,32],[117,37,159,35,"amazonCognitoAdvancedSecurityDataConst"],[117,75,159,73],[117,76,159,74,"getData"],[117,83,159,35],[117,84,159,82,"username"],[117,92,159,35],[117,94,160,10],[117,99,160,15,"userPoolId"],[117,109,159,35],[117,111,160,27],[117,116,160,32,"clientId"],[117,124,159,35],[117,125,159,6],[119,0,161,6],[119,14,161,10,"advancedSecurityData"],[119,34,161,6],[119,36,161,32],[120,0,162,8],[120,16,162,14,"userContextData"],[120,31,162,29],[120,34,162,32],[121,0,163,10,"EncodedData"],[121,14,163,10,"EncodedData"],[121,25,163,21],[121,27,163,23,"advancedSecurityData"],[122,0,162,32],[122,13,162,8],[123,0,165,8],[123,19,165,15,"userContextData"],[123,34,165,8],[124,0,166,7],[125,0,167,5],[127,0,168,4],[127,15,168,11],[127,17,168,4],[128,0,169,3]]},"type":"js/module"}]}