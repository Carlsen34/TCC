{"dependencies":[{"name":"@babel/runtime/helpers/extends","data":{"isAsync":false}},{"name":"./Utils","data":{"isAsync":false}},{"name":"../Common","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _extends = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/extends\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var Utils_1 = _$$_REQUIRE(_dependencyMap[1], \"./Utils\");\n\n  var Common_1 = _$$_REQUIRE(_dependencyMap[2], \"../Common\");\n\n  var logger = new Common_1.ConsoleLogger('StorageCache');\n\n  var StorageCache = function () {\n    function StorageCache(config) {\n      this.config = _extends({}, config);\n      this.cacheCurSizeKey = this.config.keyPrefix + 'CurSize';\n      this.checkConfig();\n    }\n\n    StorageCache.prototype.checkConfig = function () {\n      if (!Utils_1.isInteger(this.config.capacityInBytes)) {\n        logger.error('Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default.');\n        this.config.capacityInBytes = Utils_1.defaultConfig.capacityInBytes;\n      }\n\n      if (!Utils_1.isInteger(this.config.itemMaxSize)) {\n        logger.error('Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default.');\n        this.config.itemMaxSize = Utils_1.defaultConfig.itemMaxSize;\n      }\n\n      if (!Utils_1.isInteger(this.config.defaultTTL)) {\n        logger.error('Invalid parameter: defaultTTL. It should be an Integer. Setting back to default.');\n        this.config.defaultTTL = Utils_1.defaultConfig.defaultTTL;\n      }\n\n      if (!Utils_1.isInteger(this.config.defaultPriority)) {\n        logger.error('Invalid parameter: defaultPriority. It should be an Integer. Setting back to default.');\n        this.config.defaultPriority = Utils_1.defaultConfig.defaultPriority;\n      }\n\n      if (this.config.itemMaxSize > this.config.capacityInBytes) {\n        logger.error('Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default.');\n        this.config.itemMaxSize = Utils_1.defaultConfig.itemMaxSize;\n      }\n\n      if (this.config.defaultPriority > 5 || this.config.defaultPriority < 1) {\n        logger.error('Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default.');\n        this.config.defaultPriority = Utils_1.defaultConfig.defaultPriority;\n      }\n\n      if (Number(this.config.warningThreshold) > 1 || Number(this.config.warningThreshold) < 0) {\n        logger.error('Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default.');\n        this.config.warningThreshold = Utils_1.defaultConfig.warningThreshold;\n      }\n\n      var cacheLimit = 5 * 1024 * 1024;\n\n      if (this.config.capacityInBytes > cacheLimit) {\n        logger.error('Cache Capacity should be less than 5MB. Setting back to default. Setting back to default.');\n        this.config.capacityInBytes = Utils_1.defaultConfig.capacityInBytes;\n      }\n    };\n\n    StorageCache.prototype.fillCacheItem = function (key, value, options) {\n      var ret = {\n        key: key,\n        data: value,\n        timestamp: Utils_1.getCurrTime(),\n        visitedTime: Utils_1.getCurrTime(),\n        priority: options.priority,\n        expires: options.expires,\n        type: typeof value,\n        byteSize: 0\n      };\n      ret.byteSize = Utils_1.getByteLength(JSON.stringify(ret));\n      ret.byteSize = Utils_1.getByteLength(JSON.stringify(ret));\n      return ret;\n    };\n\n    StorageCache.prototype.configure = function (config) {\n      if (!config) {\n        return this.config;\n      }\n\n      if (config.keyPrefix) {\n        logger.warn(\"Don't try to configure keyPrefix!\");\n      }\n\n      this.config = _extends({}, this.config, config, config.Cache);\n      this.checkConfig();\n      return this.config;\n    };\n\n    return StorageCache;\n  }();\n\n  exports.default = StorageCache;\n});","map":[[2,0,1,0],[6,0,14,0,"Object"],[6,2,14,0,"Object"],[6,8,14,6],[6,9,14,7,"defineProperty"],[6,23,14,0],[6,24,14,22,"exports"],[6,31,14,0],[6,33,14,31],[6,45,14,0],[6,47,14,45],[7,0,14,47,"value"],[7,4,14,47,"value"],[7,9,14,52],[7,11,14,54],[8,0,14,45],[8,3,14,0],[10,0,15,0],[10,6,15,4,"Utils_1"],[10,13,15,11],[10,16,15,14,"require"],[10,27,15,21],[10,57,15,0],[12,0,16,0],[12,6,16,4,"Common_1"],[12,14,16,12],[12,17,16,15,"require"],[12,28,16,22],[12,60,16,0],[14,0,17,0],[14,6,17,4,"logger"],[14,12,17,10],[14,15,17,13],[14,19,17,17,"Common_1"],[14,27,17,25],[14,28,17,26,"ConsoleLogger"],[14,41,17,13],[14,42,17,40],[14,56,17,13],[14,57,17,0],[16,0,22,0],[16,6,22,4,"StorageCache"],[16,18,22,16],[16,21,22,34],[16,33,22,46],[17,0,27,4],[17,13,27,13,"StorageCache"],[17,25,27,4],[17,26,27,26,"config"],[17,32,27,4],[17,34,27,34],[18,0,28,8],[18,11,28,13,"config"],[18,17,28,8],[18,20,28,22],[18,29,28,36],[18,31,28,22],[18,33,28,40,"config"],[18,39,28,22],[18,40,28,8],[19,0,29,8],[19,11,29,13,"cacheCurSizeKey"],[19,26,29,8],[19,29,29,31],[19,34,29,36,"config"],[19,40,29,31],[19,41,29,43,"keyPrefix"],[19,50,29,31],[19,53,29,55],[19,62,29,8],[20,0,30,8],[20,11,30,13,"checkConfig"],[20,22,30,8],[21,0,31,5],[23,0,32,4,"StorageCache"],[23,4,32,4,"StorageCache"],[23,16,32,16],[23,17,32,17,"prototype"],[23,26,32,4],[23,27,32,27,"checkConfig"],[23,38,32,4],[23,41,32,41],[23,53,32,53],[24,0,34,8],[24,10,34,12],[24,11,34,13,"Utils_1"],[24,18,34,20],[24,19,34,21,"isInteger"],[24,28,34,13],[24,29,34,31],[24,34,34,36,"config"],[24,40,34,31],[24,41,34,43,"capacityInBytes"],[24,56,34,13],[24,57,34,8],[24,59,34,61],[25,0,35,12,"logger"],[25,8,35,12,"logger"],[25,14,35,18],[25,15,35,19,"error"],[25,20,35,12],[25,21,35,25],[25,108,35,12],[26,0,36,12],[26,13,36,17,"config"],[26,19,36,12],[26,20,36,24,"capacityInBytes"],[26,35,36,12],[26,38,36,42,"Utils_1"],[26,45,36,49],[26,46,36,50,"defaultConfig"],[26,59,36,42],[26,60,36,64,"capacityInBytes"],[26,75,36,12],[27,0,37,9],[29,0,38,8],[29,10,38,12],[29,11,38,13,"Utils_1"],[29,18,38,20],[29,19,38,21,"isInteger"],[29,28,38,13],[29,29,38,31],[29,34,38,36,"config"],[29,40,38,31],[29,41,38,43,"itemMaxSize"],[29,52,38,13],[29,53,38,8],[29,55,38,57],[30,0,39,12,"logger"],[30,8,39,12,"logger"],[30,14,39,18],[30,15,39,19,"error"],[30,20,39,12],[30,21,39,25],[30,104,39,12],[31,0,40,12],[31,13,40,17,"config"],[31,19,40,12],[31,20,40,24,"itemMaxSize"],[31,31,40,12],[31,34,40,38,"Utils_1"],[31,41,40,45],[31,42,40,46,"defaultConfig"],[31,55,40,38],[31,56,40,60,"itemMaxSize"],[31,67,40,12],[32,0,41,9],[34,0,42,8],[34,10,42,12],[34,11,42,13,"Utils_1"],[34,18,42,20],[34,19,42,21,"isInteger"],[34,28,42,13],[34,29,42,31],[34,34,42,36,"config"],[34,40,42,31],[34,41,42,43,"defaultTTL"],[34,51,42,13],[34,52,42,8],[34,54,42,56],[35,0,43,12,"logger"],[35,8,43,12,"logger"],[35,14,43,18],[35,15,43,19,"error"],[35,20,43,12],[35,21,43,25],[35,103,43,12],[36,0,44,12],[36,13,44,17,"config"],[36,19,44,12],[36,20,44,24,"defaultTTL"],[36,30,44,12],[36,33,44,37,"Utils_1"],[36,40,44,44],[36,41,44,45,"defaultConfig"],[36,54,44,37],[36,55,44,59,"defaultTTL"],[36,65,44,12],[37,0,45,9],[39,0,46,8],[39,10,46,12],[39,11,46,13,"Utils_1"],[39,18,46,20],[39,19,46,21,"isInteger"],[39,28,46,13],[39,29,46,31],[39,34,46,36,"config"],[39,40,46,31],[39,41,46,43,"defaultPriority"],[39,56,46,13],[39,57,46,8],[39,59,46,61],[40,0,47,12,"logger"],[40,8,47,12,"logger"],[40,14,47,18],[40,15,47,19,"error"],[40,20,47,12],[40,21,47,25],[40,108,47,12],[41,0,48,12],[41,13,48,17,"config"],[41,19,48,12],[41,20,48,24,"defaultPriority"],[41,35,48,12],[41,38,48,42,"Utils_1"],[41,45,48,49],[41,46,48,50,"defaultConfig"],[41,59,48,42],[41,60,48,64,"defaultPriority"],[41,75,48,12],[42,0,49,9],[44,0,50,8],[44,10,50,12],[44,15,50,17,"config"],[44,21,50,12],[44,22,50,24,"itemMaxSize"],[44,33,50,12],[44,36,50,38],[44,41,50,43,"config"],[44,47,50,38],[44,48,50,50,"capacityInBytes"],[44,63,50,8],[44,65,50,67],[45,0,51,12,"logger"],[45,8,51,12,"logger"],[45,14,51,18],[45,15,51,19,"error"],[45,20,51,12],[45,21,51,25],[45,122,51,12],[46,0,52,12],[46,13,52,17,"config"],[46,19,52,12],[46,20,52,24,"itemMaxSize"],[46,31,52,12],[46,34,52,38,"Utils_1"],[46,41,52,45],[46,42,52,46,"defaultConfig"],[46,55,52,38],[46,56,52,60,"itemMaxSize"],[46,67,52,12],[47,0,53,9],[49,0,54,8],[49,10,54,12],[49,15,54,17,"config"],[49,21,54,12],[49,22,54,24,"defaultPriority"],[49,37,54,12],[49,40,54,42],[49,41,54,12],[49,45,54,47],[49,50,54,52,"config"],[49,56,54,47],[49,57,54,59,"defaultPriority"],[49,72,54,47],[49,75,54,77],[49,76,54,8],[49,78,54,80],[50,0,55,12,"logger"],[50,8,55,12,"logger"],[50,14,55,18],[50,15,55,19,"error"],[50,20,55,12],[50,21,55,25],[50,113,55,12],[51,0,56,12],[51,13,56,17,"config"],[51,19,56,12],[51,20,56,24,"defaultPriority"],[51,35,56,12],[51,38,56,42,"Utils_1"],[51,45,56,49],[51,46,56,50,"defaultConfig"],[51,59,56,42],[51,60,56,64,"defaultPriority"],[51,75,56,12],[52,0,57,9],[54,0,58,8],[54,10,58,12,"Number"],[54,16,58,18],[54,17,58,19],[54,22,58,24,"config"],[54,28,58,19],[54,29,58,31,"warningThreshold"],[54,45,58,18],[54,46,58,12],[54,49,58,51],[54,50,58,12],[54,54,58,56,"Number"],[54,60,58,62],[54,61,58,63],[54,66,58,68,"config"],[54,72,58,63],[54,73,58,75,"warningThreshold"],[54,89,58,62],[54,90,58,56],[54,93,58,95],[54,94,58,8],[54,96,58,98],[55,0,59,12,"logger"],[55,8,59,12,"logger"],[55,14,59,18],[55,15,59,19,"error"],[55,20,59,12],[55,21,59,25],[55,114,59,12],[56,0,60,12],[56,13,60,17,"config"],[56,19,60,12],[56,20,60,24,"warningThreshold"],[56,36,60,12],[56,39,60,43,"Utils_1"],[56,46,60,50],[56,47,60,51,"defaultConfig"],[56,60,60,43],[56,61,60,65,"warningThreshold"],[56,77,60,12],[57,0,61,9],[59,0,63,8],[59,10,63,12,"cacheLimit"],[59,20,63,22],[59,23,63,25],[59,27,63,29],[59,31,63,25],[59,34,63,36],[59,38,63,8],[61,0,64,8],[61,10,64,12],[61,15,64,17,"config"],[61,21,64,12],[61,22,64,24,"capacityInBytes"],[61,37,64,12],[61,40,64,42,"cacheLimit"],[61,50,64,8],[61,52,64,54],[62,0,65,12,"logger"],[62,8,65,12,"logger"],[62,14,65,18],[62,15,65,19,"error"],[62,20,65,12],[62,21,65,25],[62,112,65,12],[63,0,66,12],[63,13,66,17,"config"],[63,19,66,12],[63,20,66,24,"capacityInBytes"],[63,35,66,12],[63,38,66,42,"Utils_1"],[63,45,66,49],[63,46,66,50,"defaultConfig"],[63,59,66,42],[63,60,66,64,"capacityInBytes"],[63,75,66,12],[64,0,67,9],[65,0,68,5],[65,5,32,4],[67,0,76,4,"StorageCache"],[67,4,76,4,"StorageCache"],[67,16,76,16],[67,17,76,17,"prototype"],[67,26,76,4],[67,27,76,27,"fillCacheItem"],[67,40,76,4],[67,43,76,43],[67,53,76,53,"key"],[67,56,76,43],[67,58,76,58,"value"],[67,63,76,43],[67,65,76,65,"options"],[67,72,76,43],[67,74,76,74],[68,0,77,8],[68,10,77,12,"ret"],[68,13,77,15],[68,16,77,18],[69,0,78,12,"key"],[69,8,78,12,"key"],[69,11,78,15],[69,13,78,17,"key"],[69,16,77,18],[70,0,79,12,"data"],[70,8,79,12,"data"],[70,12,79,16],[70,14,79,18,"value"],[70,19,77,18],[71,0,80,12,"timestamp"],[71,8,80,12,"timestamp"],[71,17,80,21],[71,19,80,23,"Utils_1"],[71,26,80,30],[71,27,80,31,"getCurrTime"],[71,38,80,23],[71,40,77,18],[72,0,81,12,"visitedTime"],[72,8,81,12,"visitedTime"],[72,19,81,23],[72,21,81,25,"Utils_1"],[72,28,81,32],[72,29,81,33,"getCurrTime"],[72,40,81,25],[72,42,77,18],[73,0,82,12,"priority"],[73,8,82,12,"priority"],[73,16,82,20],[73,18,82,22,"options"],[73,25,82,29],[73,26,82,30,"priority"],[73,34,77,18],[74,0,83,12,"expires"],[74,8,83,12,"expires"],[74,15,83,19],[74,17,83,21,"options"],[74,24,83,28],[74,25,83,29,"expires"],[74,32,77,18],[75,0,84,12,"type"],[75,8,84,12,"type"],[75,12,84,16],[75,14,84,18],[75,21,84,25,"value"],[75,26,77,18],[76,0,85,12,"byteSize"],[76,8,85,12,"byteSize"],[76,16,85,20],[76,18,85,22],[77,0,77,18],[77,7,77,8],[78,0,87,8,"ret"],[78,6,87,8,"ret"],[78,9,87,11],[78,10,87,12,"byteSize"],[78,18,87,8],[78,21,87,23,"Utils_1"],[78,28,87,30],[78,29,87,31,"getByteLength"],[78,42,87,23],[78,43,87,45,"JSON"],[78,47,87,49],[78,48,87,50,"stringify"],[78,57,87,45],[78,58,87,60,"ret"],[78,61,87,45],[78,62,87,23],[78,63,87,8],[79,0,89,8,"ret"],[79,6,89,8,"ret"],[79,9,89,11],[79,10,89,12,"byteSize"],[79,18,89,8],[79,21,89,23,"Utils_1"],[79,28,89,30],[79,29,89,31,"getByteLength"],[79,42,89,23],[79,43,89,45,"JSON"],[79,47,89,49],[79,48,89,50,"stringify"],[79,57,89,45],[79,58,89,60,"ret"],[79,61,89,45],[79,62,89,23],[79,63,89,8],[80,0,90,8],[80,13,90,15,"ret"],[80,16,90,8],[81,0,91,5],[81,5,76,4],[83,0,98,4,"StorageCache"],[83,4,98,4,"StorageCache"],[83,16,98,16],[83,17,98,17,"prototype"],[83,26,98,4],[83,27,98,27,"configure"],[83,36,98,4],[83,39,98,39],[83,49,98,49,"config"],[83,55,98,39],[83,57,98,57],[84,0,99,8],[84,10,99,12],[84,11,99,13,"config"],[84,17,99,8],[84,19,99,21],[85,0,100,12],[85,15,100,19],[85,20,100,24,"config"],[85,26,100,12],[86,0,101,9],[88,0,102,8],[88,10,102,12,"config"],[88,16,102,18],[88,17,102,19,"keyPrefix"],[88,26,102,8],[88,28,102,30],[89,0,103,12,"logger"],[89,8,103,12,"logger"],[89,14,103,18],[89,15,103,19,"warn"],[89,19,103,12],[89,20,103,24],[89,55,103,12],[90,0,104,9],[92,0,105,8],[92,11,105,13,"config"],[92,17,105,8],[92,20,105,22],[92,29,105,36],[92,31,105,22],[92,33,105,40],[92,38,105,45,"config"],[92,44,105,22],[92,46,105,53,"config"],[92,52,105,22],[92,54,105,61,"config"],[92,60,105,67],[92,61,105,68,"Cache"],[92,66,105,22],[92,67,105,8],[93,0,106,8],[93,11,106,13,"checkConfig"],[93,22,106,8],[94,0,107,8],[94,13,107,15],[94,18,107,20,"config"],[94,24,107,8],[95,0,108,5],[95,5,98,4],[97,0,109,4],[97,11,109,11,"StorageCache"],[97,23,109,4],[98,0,110,1],[98,3,22,34],[98,5,22,0],[100,0,111,0,"exports"],[100,2,111,0,"exports"],[100,9,111,7],[100,10,111,8,"default"],[100,17,111,0],[100,20,111,18,"StorageCache"],[100,32,111,0]]},"type":"js/module"}]}