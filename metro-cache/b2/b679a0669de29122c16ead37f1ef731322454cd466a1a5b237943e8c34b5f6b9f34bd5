{"dependencies":[{"name":"./core","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var AWS = _$$_REQUIRE(_dependencyMap[0], \"./core\");\n\n  AWS.Credentials = AWS.util.inherit({\n    constructor: function Credentials() {\n      AWS.util.hideProperties(this, ['secretAccessKey']);\n      this.expired = false;\n      this.expireTime = null;\n      this.refreshCallbacks = [];\n\n      if (arguments.length === 1 && typeof arguments[0] === 'object') {\n        var creds = arguments[0].credentials || arguments[0];\n        this.accessKeyId = creds.accessKeyId;\n        this.secretAccessKey = creds.secretAccessKey;\n        this.sessionToken = creds.sessionToken;\n      } else {\n        this.accessKeyId = arguments[0];\n        this.secretAccessKey = arguments[1];\n        this.sessionToken = arguments[2];\n      }\n    },\n    expiryWindow: 15,\n    needsRefresh: function needsRefresh() {\n      var currentTime = AWS.util.date.getDate().getTime();\n      var adjustedTime = new Date(currentTime + this.expiryWindow * 1000);\n\n      if (this.expireTime && adjustedTime > this.expireTime) {\n        return true;\n      } else {\n        return this.expired || !this.accessKeyId || !this.secretAccessKey;\n      }\n    },\n    get: function get(callback) {\n      var self = this;\n\n      if (this.needsRefresh()) {\n        this.refresh(function (err) {\n          if (!err) self.expired = false;\n          if (callback) callback(err);\n        });\n      } else if (callback) {\n        callback();\n      }\n    },\n    refresh: function refresh(callback) {\n      this.expired = false;\n      callback();\n    },\n    coalesceRefresh: function coalesceRefresh(callback, sync) {\n      var self = this;\n\n      if (self.refreshCallbacks.push(callback) === 1) {\n        self.load(function onLoad(err) {\n          AWS.util.arrayEach(self.refreshCallbacks, function (callback) {\n            if (sync) {\n              callback(err);\n            } else {\n              AWS.util.defer(function () {\n                callback(err);\n              });\n            }\n          });\n          self.refreshCallbacks.length = 0;\n        });\n      }\n    },\n    load: function load(callback) {\n      callback();\n    }\n  });\n\n  AWS.Credentials.addPromisesToClass = function addPromisesToClass(PromiseDependency) {\n    this.prototype.getPromise = AWS.util.promisifyMethod('get', PromiseDependency);\n    this.prototype.refreshPromise = AWS.util.promisifyMethod('refresh', PromiseDependency);\n  };\n\n  AWS.Credentials.deletePromisesFromClass = function deletePromisesFromClass() {\n    delete this.prototype.getPromise;\n    delete this.prototype.refreshPromise;\n  };\n\n  AWS.util.addPromises(AWS.Credentials);\n});","map":[[2,0,1,0],[2,6,1,4,"AWS"],[2,9,1,7],[2,12,1,10,"require"],[2,23,1,17],[2,52,1,0],[4,0,41,0,"AWS"],[4,2,41,0,"AWS"],[4,5,41,3],[4,6,41,4,"Credentials"],[4,17,41,0],[4,20,41,18,"AWS"],[4,23,41,21],[4,24,41,22,"util"],[4,28,41,18],[4,29,41,27,"inherit"],[4,36,41,18],[4,37,41,35],[5,0,65,2,"constructor"],[5,4,65,2,"constructor"],[5,15,65,13],[5,17,65,15],[5,26,65,24,"Credentials"],[5,37,65,15],[5,40,65,38],[6,0,67,4,"AWS"],[6,6,67,4,"AWS"],[6,9,67,7],[6,10,67,8,"util"],[6,14,67,4],[6,15,67,13,"hideProperties"],[6,29,67,4],[6,30,67,28],[6,34,67,4],[6,36,67,34],[6,37,67,35],[6,54,67,34],[6,55,67,4],[7,0,69,4],[7,11,69,9,"expired"],[7,18,69,4],[7,21,69,19],[7,26,69,4],[8,0,70,4],[8,11,70,9,"expireTime"],[8,21,70,4],[8,24,70,22],[8,28,70,4],[9,0,71,4],[9,11,71,9,"refreshCallbacks"],[9,27,71,4],[9,30,71,28],[9,32,71,4],[11,0,72,4],[11,10,72,8,"arguments"],[11,19,72,17],[11,20,72,18,"length"],[11,26,72,8],[11,31,72,29],[11,32,72,8],[11,36,72,34],[11,43,72,41,"arguments"],[11,52,72,50],[11,53,72,51],[11,54,72,50],[11,55,72,34],[11,60,72,58],[11,68,72,4],[11,70,72,68],[12,0,73,6],[12,12,73,10,"creds"],[12,17,73,15],[12,20,73,18,"arguments"],[12,29,73,27],[12,30,73,28],[12,31,73,27],[12,32,73,18],[12,33,73,31,"credentials"],[12,44,73,18],[12,48,73,46,"arguments"],[12,57,73,55],[12,58,73,56],[12,59,73,55],[12,60,73,6],[13,0,74,6],[13,13,74,11,"accessKeyId"],[13,24,74,6],[13,27,74,25,"creds"],[13,32,74,30],[13,33,74,31,"accessKeyId"],[13,44,74,6],[14,0,75,6],[14,13,75,11,"secretAccessKey"],[14,28,75,6],[14,31,75,29,"creds"],[14,36,75,34],[14,37,75,35,"secretAccessKey"],[14,52,75,6],[15,0,76,6],[15,13,76,11,"sessionToken"],[15,25,76,6],[15,28,76,26,"creds"],[15,33,76,31],[15,34,76,32,"sessionToken"],[15,46,76,6],[16,0,77,5],[16,7,72,4],[16,13,77,11],[17,0,78,6],[17,13,78,11,"accessKeyId"],[17,24,78,6],[17,27,78,25,"arguments"],[17,36,78,34],[17,37,78,35],[17,38,78,34],[17,39,78,6],[18,0,79,6],[18,13,79,11,"secretAccessKey"],[18,28,79,6],[18,31,79,29,"arguments"],[18,40,79,38],[18,41,79,39],[18,42,79,38],[18,43,79,6],[19,0,80,6],[19,13,80,11,"sessionToken"],[19,25,80,6],[19,28,80,26,"arguments"],[19,37,80,35],[19,38,80,36],[19,39,80,35],[19,40,80,6],[20,0,81,5],[21,0,82,3],[21,5,41,35],[22,0,88,2,"expiryWindow"],[22,4,88,2,"expiryWindow"],[22,16,88,14],[22,18,88,16],[22,20,41,35],[23,0,95,2,"needsRefresh"],[23,4,95,2,"needsRefresh"],[23,16,95,14],[23,18,95,16],[23,27,95,25,"needsRefresh"],[23,39,95,16],[23,42,95,40],[24,0,96,4],[24,10,96,8,"currentTime"],[24,21,96,19],[24,24,96,22,"AWS"],[24,27,96,25],[24,28,96,26,"util"],[24,32,96,22],[24,33,96,31,"date"],[24,37,96,22],[24,38,96,36,"getDate"],[24,45,96,22],[24,48,96,46,"getTime"],[24,55,96,22],[24,57,96,4],[25,0,97,4],[25,10,97,8,"adjustedTime"],[25,22,97,20],[25,25,97,23],[25,29,97,27,"Date"],[25,33,97,23],[25,34,97,32,"currentTime"],[25,45,97,43],[25,48,97,46],[25,53,97,51,"expiryWindow"],[25,65,97,46],[25,68,97,66],[25,72,97,23],[25,73,97,4],[27,0,99,4],[27,10,99,8],[27,15,99,13,"expireTime"],[27,25,99,8],[27,29,99,27,"adjustedTime"],[27,41,99,39],[27,44,99,42],[27,49,99,47,"expireTime"],[27,59,99,4],[27,61,99,59],[28,0,100,6],[28,15,100,13],[28,19,100,6],[29,0,101,5],[29,7,99,4],[29,13,101,11],[30,0,102,6],[30,15,102,13],[30,20,102,18,"expired"],[30,27,102,13],[30,31,102,29],[30,32,102,30],[30,37,102,35,"accessKeyId"],[30,48,102,13],[30,52,102,50],[30,53,102,51],[30,58,102,56,"secretAccessKey"],[30,73,102,6],[31,0,103,5],[32,0,104,3],[32,5,41,35],[33,0,119,2,"get"],[33,4,119,2,"get"],[33,7,119,5],[33,9,119,7],[33,18,119,16,"get"],[33,21,119,7],[33,22,119,20,"callback"],[33,30,119,7],[33,32,119,30],[34,0,120,4],[34,10,120,8,"self"],[34,14,120,12],[34,17,120,15],[34,21,120,4],[36,0,121,4],[36,10,121,8],[36,15,121,13,"needsRefresh"],[36,27,121,8],[36,29,121,4],[36,31,121,29],[37,0,122,6],[37,13,122,11,"refresh"],[37,20,122,6],[37,21,122,19],[37,31,122,28,"err"],[37,34,122,19],[37,36,122,33],[38,0,123,8],[38,14,123,12],[38,15,123,13,"err"],[38,18,123,8],[38,20,123,18,"self"],[38,24,123,22],[38,25,123,23,"expired"],[38,32,123,18],[38,35,123,33],[38,40,123,18],[39,0,124,8],[39,14,124,12,"callback"],[39,22,124,8],[39,24,124,22,"callback"],[39,32,124,30],[39,33,124,31,"err"],[39,36,124,30],[39,37,124,22],[40,0,125,7],[40,9,122,6],[41,0,126,5],[41,7,121,4],[41,13,126,11],[41,17,126,15,"callback"],[41,25,126,11],[41,27,126,25],[42,0,127,6,"callback"],[42,8,127,6,"callback"],[42,16,127,14],[43,0,128,5],[44,0,129,3],[44,5,41,35],[45,0,193,2,"refresh"],[45,4,193,2,"refresh"],[45,11,193,9],[45,13,193,11],[45,22,193,20,"refresh"],[45,29,193,11],[45,30,193,28,"callback"],[45,38,193,11],[45,40,193,38],[46,0,194,4],[46,11,194,9,"expired"],[46,18,194,4],[46,21,194,19],[46,26,194,4],[47,0,195,4,"callback"],[47,6,195,4,"callback"],[47,14,195,12],[48,0,196,3],[48,5,41,35],[49,0,202,2,"coalesceRefresh"],[49,4,202,2,"coalesceRefresh"],[49,19,202,17],[49,21,202,19],[49,30,202,28,"coalesceRefresh"],[49,45,202,19],[49,46,202,44,"callback"],[49,54,202,19],[49,56,202,54,"sync"],[49,60,202,19],[49,62,202,60],[50,0,203,4],[50,10,203,8,"self"],[50,14,203,12],[50,17,203,15],[50,21,203,4],[52,0,204,4],[52,10,204,8,"self"],[52,14,204,12],[52,15,204,13,"refreshCallbacks"],[52,31,204,8],[52,32,204,30,"push"],[52,36,204,8],[52,37,204,35,"callback"],[52,45,204,8],[52,51,204,49],[52,52,204,4],[52,54,204,52],[53,0,205,6,"self"],[53,8,205,6,"self"],[53,12,205,10],[53,13,205,11,"load"],[53,17,205,6],[53,18,205,16],[53,27,205,25,"onLoad"],[53,33,205,16],[53,34,205,32,"err"],[53,37,205,16],[53,39,205,37],[54,0,206,8,"AWS"],[54,10,206,8,"AWS"],[54,13,206,11],[54,14,206,12,"util"],[54,18,206,8],[54,19,206,17,"arrayEach"],[54,28,206,8],[54,29,206,27,"self"],[54,33,206,31],[54,34,206,32,"refreshCallbacks"],[54,50,206,8],[54,52,206,50],[54,62,206,59,"callback"],[54,70,206,50],[54,72,206,69],[55,0,207,10],[55,16,207,14,"sync"],[55,20,207,10],[55,22,207,20],[56,0,208,12,"callback"],[56,14,208,12,"callback"],[56,22,208,20],[56,23,208,21,"err"],[56,26,208,20],[56,27,208,12],[57,0,209,11],[57,13,207,10],[57,19,209,17],[58,0,211,12,"AWS"],[58,14,211,12,"AWS"],[58,17,211,15],[58,18,211,16,"util"],[58,22,211,12],[58,23,211,21,"defer"],[58,28,211,12],[58,29,211,27],[58,41,211,39],[59,0,212,14,"callback"],[59,16,212,14,"callback"],[59,24,212,22],[59,25,212,23,"err"],[59,28,212,22],[59,29,212,14],[60,0,213,13],[60,15,211,12],[61,0,214,11],[62,0,215,9],[62,11,206,8],[63,0,216,8,"self"],[63,10,216,8,"self"],[63,14,216,12],[63,15,216,13,"refreshCallbacks"],[63,31,216,8],[63,32,216,30,"length"],[63,38,216,8],[63,41,216,39],[63,42,216,8],[64,0,217,7],[64,9,205,6],[65,0,218,5],[66,0,219,3],[66,5,41,35],[67,0,225,2,"load"],[67,4,225,2,"load"],[67,8,225,6],[67,10,225,8],[67,19,225,17,"load"],[67,23,225,8],[67,24,225,22,"callback"],[67,32,225,8],[67,34,225,32],[68,0,226,4,"callback"],[68,6,226,4,"callback"],[68,14,226,12],[69,0,227,3],[70,0,41,35],[70,3,41,18],[70,4,41,0],[72,0,233,0,"AWS"],[72,2,233,0,"AWS"],[72,5,233,3],[72,6,233,4,"Credentials"],[72,17,233,0],[72,18,233,16,"addPromisesToClass"],[72,36,233,0],[72,39,233,37],[72,48,233,46,"addPromisesToClass"],[72,66,233,37],[72,67,233,65,"PromiseDependency"],[72,84,233,37],[72,86,233,84],[73,0,234,2],[73,9,234,7,"prototype"],[73,18,234,2],[73,19,234,17,"getPromise"],[73,29,234,2],[73,32,234,30,"AWS"],[73,35,234,33],[73,36,234,34,"util"],[73,40,234,30],[73,41,234,39,"promisifyMethod"],[73,56,234,30],[73,57,234,55],[73,62,234,30],[73,64,234,62,"PromiseDependency"],[73,81,234,30],[73,82,234,2],[74,0,235,2],[74,9,235,7,"prototype"],[74,18,235,2],[74,19,235,17,"refreshPromise"],[74,33,235,2],[74,36,235,34,"AWS"],[74,39,235,37],[74,40,235,38,"util"],[74,44,235,34],[74,45,235,43,"promisifyMethod"],[74,60,235,34],[74,61,235,59],[74,70,235,34],[74,72,235,70,"PromiseDependency"],[74,89,235,34],[74,90,235,2],[75,0,236,1],[75,3,233,0],[77,0,241,0,"AWS"],[77,2,241,0,"AWS"],[77,5,241,3],[77,6,241,4,"Credentials"],[77,17,241,0],[77,18,241,16,"deletePromisesFromClass"],[77,41,241,0],[77,44,241,42],[77,53,241,51,"deletePromisesFromClass"],[77,76,241,42],[77,79,241,77],[78,0,242,2],[78,11,242,9],[78,16,242,14,"prototype"],[78,25,242,9],[78,26,242,24,"getPromise"],[78,36,242,2],[79,0,243,2],[79,11,243,9],[79,16,243,14,"prototype"],[79,25,243,9],[79,26,243,24,"refreshPromise"],[79,40,243,2],[80,0,244,1],[80,3,241,0],[82,0,246,0,"AWS"],[82,2,246,0,"AWS"],[82,5,246,3],[82,6,246,4,"util"],[82,10,246,0],[82,11,246,9,"addPromises"],[82,22,246,0],[82,23,246,21,"AWS"],[82,26,246,24],[82,27,246,25,"Credentials"],[82,38,246,0]]},"type":"js/module"}]}