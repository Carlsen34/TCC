{"dependencies":[{"name":"../core","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var AWS = _$$_REQUIRE(_dependencyMap[0], \"../core\");\n\n  var cachedSecret = {};\n  var cacheQueue = [];\n  var maxCacheEntries = 50;\n  var v4Identifier = 'aws4_request';\n  module.exports = {\n    createScope: function createScope(date, region, serviceName) {\n      return [date.substr(0, 8), region, serviceName, v4Identifier].join('/');\n    },\n    getSigningKey: function getSigningKey(credentials, date, region, service, shouldCache) {\n      var credsIdentifier = AWS.util.crypto.hmac(credentials.secretAccessKey, credentials.accessKeyId, 'base64');\n      var cacheKey = [credsIdentifier, date, region, service].join('_');\n      shouldCache = shouldCache !== false;\n\n      if (shouldCache && cacheKey in cachedSecret) {\n        return cachedSecret[cacheKey];\n      }\n\n      var kDate = AWS.util.crypto.hmac('AWS4' + credentials.secretAccessKey, date, 'buffer');\n      var kRegion = AWS.util.crypto.hmac(kDate, region, 'buffer');\n      var kService = AWS.util.crypto.hmac(kRegion, service, 'buffer');\n      var signingKey = AWS.util.crypto.hmac(kService, v4Identifier, 'buffer');\n\n      if (shouldCache) {\n        cachedSecret[cacheKey] = signingKey;\n        cacheQueue.push(cacheKey);\n\n        if (cacheQueue.length > maxCacheEntries) {\n          delete cachedSecret[cacheQueue.shift()];\n        }\n      }\n\n      return signingKey;\n    },\n    emptyCache: function emptyCache() {\n      cachedSecret = {};\n      cacheQueue = [];\n    }\n  };\n});","map":[[2,0,1,0],[2,6,1,4,"AWS"],[2,9,1,7],[2,12,1,10,"require"],[2,23,1,17],[2,53,1,0],[4,0,6,0],[4,6,6,4,"cachedSecret"],[4,18,6,16],[4,21,6,19],[4,23,6,0],[5,0,11,0],[5,6,11,4,"cacheQueue"],[5,16,11,14],[5,19,11,17],[5,21,11,0],[6,0,16,0],[6,6,16,4,"maxCacheEntries"],[6,21,16,19],[6,24,16,22],[6,26,16,0],[7,0,21,0],[7,6,21,4,"v4Identifier"],[7,18,21,16],[7,21,21,19],[7,35,21,0],[8,0,23,0,"module"],[8,2,23,0,"module"],[8,8,23,6],[8,9,23,7,"exports"],[8,16,23,0],[8,19,23,17],[9,0,32,2,"createScope"],[9,4,32,2,"createScope"],[9,15,32,13],[9,17,32,15],[9,26,32,24,"createScope"],[9,37,32,15],[9,38,32,36,"date"],[9,42,32,15],[9,44,32,42,"region"],[9,50,32,15],[9,52,32,50,"serviceName"],[9,63,32,15],[9,65,32,63],[10,0,33,4],[10,13,33,11],[10,14,34,6,"date"],[10,18,34,10],[10,19,34,11,"substr"],[10,25,34,6],[10,26,34,18],[10,27,34,6],[10,29,34,21],[10,30,34,6],[10,31,33,11],[10,33,35,6,"region"],[10,39,33,11],[10,41,36,6,"serviceName"],[10,52,33,11],[10,54,37,6,"v4Identifier"],[10,66,33,11],[10,68,38,6,"join"],[10,72,33,11],[10,73,38,11],[10,76,33,11],[10,77,33,4],[11,0,39,3],[11,5,23,17],[12,0,51,2,"getSigningKey"],[12,4,51,2,"getSigningKey"],[12,17,51,15],[12,19,51,17],[12,28,51,26,"getSigningKey"],[12,41,51,17],[12,42,52,4,"credentials"],[12,53,51,17],[12,55,53,4,"date"],[12,59,51,17],[12,61,54,4,"region"],[12,67,51,17],[12,69,55,4,"service"],[12,76,51,17],[12,78,56,4,"shouldCache"],[12,89,51,17],[12,91,57,4],[13,0,58,4],[13,10,58,8,"credsIdentifier"],[13,25,58,23],[13,28,58,26,"AWS"],[13,31,58,29],[13,32,58,30,"util"],[13,36,58,26],[13,37,58,35,"crypto"],[13,43,58,26],[13,44,59,7,"hmac"],[13,48,58,26],[13,49,59,12,"credentials"],[13,60,59,23],[13,61,59,24,"secretAccessKey"],[13,76,58,26],[13,78,59,41,"credentials"],[13,89,59,52],[13,90,59,53,"accessKeyId"],[13,101,58,26],[13,103,59,66],[13,111,58,26],[13,112,58,4],[14,0,60,4],[14,10,60,8,"cacheKey"],[14,18,60,16],[14,21,60,19],[14,22,60,20,"credsIdentifier"],[14,37,60,19],[14,39,60,37,"date"],[14,43,60,19],[14,45,60,43,"region"],[14,51,60,19],[14,53,60,51,"service"],[14,60,60,19],[14,62,60,60,"join"],[14,66,60,19],[14,67,60,65],[14,70,60,19],[14,71,60,4],[15,0,61,4,"shouldCache"],[15,6,61,4,"shouldCache"],[15,17,61,15],[15,20,61,18,"shouldCache"],[15,31,61,29],[15,36,61,34],[15,41,61,4],[17,0,62,4],[17,10,62,8,"shouldCache"],[17,21,62,19],[17,25,62,24,"cacheKey"],[17,33,62,32],[17,37,62,36,"cachedSecret"],[17,49,62,4],[17,51,62,51],[18,0,63,6],[18,15,63,13,"cachedSecret"],[18,27,63,25],[18,28,63,26,"cacheKey"],[18,36,63,25],[18,37,63,6],[19,0,64,5],[21,0,66,4],[21,10,66,8,"kDate"],[21,15,66,13],[21,18,66,16,"AWS"],[21,21,66,19],[21,22,66,20,"util"],[21,26,66,16],[21,27,66,25,"crypto"],[21,33,66,16],[21,34,66,32,"hmac"],[21,38,66,16],[21,39,67,6],[21,48,67,15,"credentials"],[21,59,67,26],[21,60,67,27,"secretAccessKey"],[21,75,66,16],[21,77,68,6,"date"],[21,81,66,16],[21,83,69,6],[21,91,66,16],[21,92,66,4],[22,0,71,4],[22,10,71,8,"kRegion"],[22,17,71,15],[22,20,71,18,"AWS"],[22,23,71,21],[22,24,71,22,"util"],[22,28,71,18],[22,29,71,27,"crypto"],[22,35,71,18],[22,36,71,34,"hmac"],[22,40,71,18],[22,41,71,39,"kDate"],[22,46,71,18],[22,48,71,46,"region"],[22,54,71,18],[22,56,71,54],[22,64,71,18],[22,65,71,4],[23,0,72,4],[23,10,72,8,"kService"],[23,18,72,16],[23,21,72,19,"AWS"],[23,24,72,22],[23,25,72,23,"util"],[23,29,72,19],[23,30,72,28,"crypto"],[23,36,72,19],[23,37,72,35,"hmac"],[23,41,72,19],[23,42,72,40,"kRegion"],[23,49,72,19],[23,51,72,49,"service"],[23,58,72,19],[23,60,72,58],[23,68,72,19],[23,69,72,4],[24,0,74,4],[24,10,74,8,"signingKey"],[24,20,74,18],[24,23,74,21,"AWS"],[24,26,74,24],[24,27,74,25,"util"],[24,31,74,21],[24,32,74,30,"crypto"],[24,38,74,21],[24,39,74,37,"hmac"],[24,43,74,21],[24,44,74,42,"kService"],[24,52,74,21],[24,54,74,52,"v4Identifier"],[24,66,74,21],[24,68,74,66],[24,76,74,21],[24,77,74,4],[26,0,75,4],[26,10,75,8,"shouldCache"],[26,21,75,4],[26,23,75,21],[27,0,76,6,"cachedSecret"],[27,8,76,6,"cachedSecret"],[27,20,76,18],[27,21,76,19,"cacheKey"],[27,29,76,18],[27,30,76,6],[27,33,76,31,"signingKey"],[27,43,76,6],[28,0,77,6,"cacheQueue"],[28,8,77,6,"cacheQueue"],[28,18,77,16],[28,19,77,17,"push"],[28,23,77,6],[28,24,77,22,"cacheKey"],[28,32,77,6],[30,0,78,6],[30,12,78,10,"cacheQueue"],[30,22,78,20],[30,23,78,21,"length"],[30,29,78,10],[30,32,78,30,"maxCacheEntries"],[30,47,78,6],[30,49,78,47],[31,0,80,8],[31,17,80,15,"cachedSecret"],[31,29,80,27],[31,30,80,28,"cacheQueue"],[31,40,80,38],[31,41,80,39,"shift"],[31,46,80,28],[31,48,80,27],[31,49,80,8],[32,0,81,7],[33,0,82,5],[35,0,84,4],[35,13,84,11,"signingKey"],[35,23,84,4],[36,0,85,3],[36,5,23,17],[37,0,93,2,"emptyCache"],[37,4,93,2,"emptyCache"],[37,14,93,12],[37,16,93,14],[37,25,93,23,"emptyCache"],[37,35,93,14],[37,38,93,36],[38,0,94,4,"cachedSecret"],[38,6,94,4,"cachedSecret"],[38,18,94,16],[38,21,94,19],[38,23,94,4],[39,0,95,4,"cacheQueue"],[39,6,95,4,"cacheQueue"],[39,16,95,14],[39,19,95,17],[39,21,95,4],[40,0,96,3],[41,0,23,17],[41,3,23,0]]},"type":"js/module"}]}