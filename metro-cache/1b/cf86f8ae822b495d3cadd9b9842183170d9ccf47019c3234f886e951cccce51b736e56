{"dependencies":[{"name":"../core","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var AWS = _$$_REQUIRE(_dependencyMap[0], \"../core\");\n\n  var cachedSecret = {};\n  var cacheQueue = [];\n  var maxCacheEntries = 50;\n  var v4Identifier = 'aws4_request';\n  module.exports = {\n    createScope: function createScope(date, region, serviceName) {\n      return [date.substr(0, 8), region, serviceName, v4Identifier].join('/');\n    },\n    getSigningKey: function getSigningKey(credentials, date, region, service, shouldCache) {\n      var credsIdentifier = AWS.util.crypto.hmac(credentials.secretAccessKey, credentials.accessKeyId, 'base64');\n      var cacheKey = [credsIdentifier, date, region, service].join('_');\n      shouldCache = shouldCache !== false;\n\n      if (shouldCache && cacheKey in cachedSecret) {\n        return cachedSecret[cacheKey];\n      }\n\n      var kDate = AWS.util.crypto.hmac('AWS4' + credentials.secretAccessKey, date, 'buffer');\n      var kRegion = AWS.util.crypto.hmac(kDate, region, 'buffer');\n      var kService = AWS.util.crypto.hmac(kRegion, service, 'buffer');\n      var signingKey = AWS.util.crypto.hmac(kService, v4Identifier, 'buffer');\n\n      if (shouldCache) {\n        cachedSecret[cacheKey] = signingKey;\n        cacheQueue.push(cacheKey);\n\n        if (cacheQueue.length > maxCacheEntries) {\n          delete cachedSecret[cacheQueue.shift()];\n        }\n      }\n\n      return signingKey;\n    },\n    emptyCache: function emptyCache() {\n      cachedSecret = {};\n      cacheQueue = [];\n    }\n  };\n});","map":[[2,0,1,0],[2,6,1,4,"AWS"],[2,9,1,7],[2,12,1,10,"require"],[2,23,1,17],[2,53,1,0],[4,0,6,0],[4,6,6,4,"cachedSecret"],[4,18,6,16],[4,21,6,19],[4,23,6,0],[5,0,11,0],[5,6,11,4,"cacheQueue"],[5,16,11,14],[5,19,11,17],[5,21,11,0],[6,0,16,0],[6,6,16,4,"maxCacheEntries"],[6,21,16,19],[6,24,16,22],[6,26,16,0],[7,0,21,0],[7,6,21,4,"v4Identifier"],[7,18,21,16],[7,21,21,19],[7,35,21,0],[8,0,26,0,"module"],[8,2,26,0,"module"],[8,8,26,6],[8,9,26,7,"exports"],[8,16,26,0],[8,19,26,17],[9,0,35,2,"createScope"],[9,4,35,2,"createScope"],[9,15,35,13],[9,17,35,15],[9,26,35,24,"createScope"],[9,37,35,15],[9,38,35,36,"date"],[9,42,35,15],[9,44,35,42,"region"],[9,50,35,15],[9,52,35,50,"serviceName"],[9,63,35,15],[9,65,35,63],[10,0,36,4],[10,13,36,11],[10,14,37,6,"date"],[10,18,37,10],[10,19,37,11,"substr"],[10,25,37,6],[10,26,37,18],[10,27,37,6],[10,29,37,21],[10,30,37,6],[10,31,36,11],[10,33,38,6,"region"],[10,39,36,11],[10,41,39,6,"serviceName"],[10,52,36,11],[10,54,40,6,"v4Identifier"],[10,66,36,11],[10,68,41,6,"join"],[10,72,36,11],[10,73,41,11],[10,76,36,11],[10,77,36,4],[11,0,42,3],[11,5,26,17],[12,0,54,2,"getSigningKey"],[12,4,54,2,"getSigningKey"],[12,17,54,15],[12,19,54,17],[12,28,54,26,"getSigningKey"],[12,41,54,17],[12,42,55,4,"credentials"],[12,53,54,17],[12,55,56,4,"date"],[12,59,54,17],[12,61,57,4,"region"],[12,67,54,17],[12,69,58,4,"service"],[12,76,54,17],[12,78,59,4,"shouldCache"],[12,89,54,17],[12,91,60,4],[13,0,61,4],[13,10,61,8,"credsIdentifier"],[13,25,61,23],[13,28,61,26,"AWS"],[13,31,61,29],[13,32,61,30,"util"],[13,36,61,26],[13,37,61,35,"crypto"],[13,43,61,26],[13,44,62,7,"hmac"],[13,48,61,26],[13,49,62,12,"credentials"],[13,60,62,23],[13,61,62,24,"secretAccessKey"],[13,76,61,26],[13,78,62,41,"credentials"],[13,89,62,52],[13,90,62,53,"accessKeyId"],[13,101,61,26],[13,103,62,66],[13,111,61,26],[13,112,61,4],[14,0,63,4],[14,10,63,8,"cacheKey"],[14,18,63,16],[14,21,63,19],[14,22,63,20,"credsIdentifier"],[14,37,63,19],[14,39,63,37,"date"],[14,43,63,19],[14,45,63,43,"region"],[14,51,63,19],[14,53,63,51,"service"],[14,60,63,19],[14,62,63,60,"join"],[14,66,63,19],[14,67,63,65],[14,70,63,19],[14,71,63,4],[15,0,64,4,"shouldCache"],[15,6,64,4,"shouldCache"],[15,17,64,15],[15,20,64,18,"shouldCache"],[15,31,64,29],[15,36,64,34],[15,41,64,4],[17,0,65,4],[17,10,65,8,"shouldCache"],[17,21,65,19],[17,25,65,24,"cacheKey"],[17,33,65,32],[17,37,65,36,"cachedSecret"],[17,49,65,4],[17,51,65,51],[18,0,66,6],[18,15,66,13,"cachedSecret"],[18,27,66,25],[18,28,66,26,"cacheKey"],[18,36,66,25],[18,37,66,6],[19,0,67,5],[21,0,69,4],[21,10,69,8,"kDate"],[21,15,69,13],[21,18,69,16,"AWS"],[21,21,69,19],[21,22,69,20,"util"],[21,26,69,16],[21,27,69,25,"crypto"],[21,33,69,16],[21,34,69,32,"hmac"],[21,38,69,16],[21,39,70,6],[21,48,70,15,"credentials"],[21,59,70,26],[21,60,70,27,"secretAccessKey"],[21,75,69,16],[21,77,71,6,"date"],[21,81,69,16],[21,83,72,6],[21,91,69,16],[21,92,69,4],[22,0,74,4],[22,10,74,8,"kRegion"],[22,17,74,15],[22,20,74,18,"AWS"],[22,23,74,21],[22,24,74,22,"util"],[22,28,74,18],[22,29,74,27,"crypto"],[22,35,74,18],[22,36,74,34,"hmac"],[22,40,74,18],[22,41,74,39,"kDate"],[22,46,74,18],[22,48,74,46,"region"],[22,54,74,18],[22,56,74,54],[22,64,74,18],[22,65,74,4],[23,0,75,4],[23,10,75,8,"kService"],[23,18,75,16],[23,21,75,19,"AWS"],[23,24,75,22],[23,25,75,23,"util"],[23,29,75,19],[23,30,75,28,"crypto"],[23,36,75,19],[23,37,75,35,"hmac"],[23,41,75,19],[23,42,75,40,"kRegion"],[23,49,75,19],[23,51,75,49,"service"],[23,58,75,19],[23,60,75,58],[23,68,75,19],[23,69,75,4],[24,0,77,4],[24,10,77,8,"signingKey"],[24,20,77,18],[24,23,77,21,"AWS"],[24,26,77,24],[24,27,77,25,"util"],[24,31,77,21],[24,32,77,30,"crypto"],[24,38,77,21],[24,39,77,37,"hmac"],[24,43,77,21],[24,44,77,42,"kService"],[24,52,77,21],[24,54,77,52,"v4Identifier"],[24,66,77,21],[24,68,77,66],[24,76,77,21],[24,77,77,4],[26,0,78,4],[26,10,78,8,"shouldCache"],[26,21,78,4],[26,23,78,21],[27,0,79,6,"cachedSecret"],[27,8,79,6,"cachedSecret"],[27,20,79,18],[27,21,79,19,"cacheKey"],[27,29,79,18],[27,30,79,6],[27,33,79,31,"signingKey"],[27,43,79,6],[28,0,80,6,"cacheQueue"],[28,8,80,6,"cacheQueue"],[28,18,80,16],[28,19,80,17,"push"],[28,23,80,6],[28,24,80,22,"cacheKey"],[28,32,80,6],[30,0,81,6],[30,12,81,10,"cacheQueue"],[30,22,81,20],[30,23,81,21,"length"],[30,29,81,10],[30,32,81,30,"maxCacheEntries"],[30,47,81,6],[30,49,81,47],[31,0,83,8],[31,17,83,15,"cachedSecret"],[31,29,83,27],[31,30,83,28,"cacheQueue"],[31,40,83,38],[31,41,83,39,"shift"],[31,46,83,28],[31,48,83,27],[31,49,83,8],[32,0,84,7],[33,0,85,5],[35,0,87,4],[35,13,87,11,"signingKey"],[35,23,87,4],[36,0,88,3],[36,5,26,17],[37,0,96,2,"emptyCache"],[37,4,96,2,"emptyCache"],[37,14,96,12],[37,16,96,14],[37,25,96,23,"emptyCache"],[37,35,96,14],[37,38,96,36],[38,0,97,4,"cachedSecret"],[38,6,97,4,"cachedSecret"],[38,18,97,16],[38,21,97,19],[38,23,97,4],[39,0,98,4,"cacheQueue"],[39,6,98,4,"cacheQueue"],[39,16,98,14],[39,19,98,17],[39,21,98,4],[40,0,99,3],[41,0,26,17],[41,3,26,0]]},"type":"js/module"}]}