{"dependencies":[{"name":"../core","data":{"isAsync":false}},{"name":"../dynamodb/document_client","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var AWS = _$$_REQUIRE(_dependencyMap[0], \"../core\");\n\n  _$$_REQUIRE(_dependencyMap[1], \"../dynamodb/document_client\");\n\n  AWS.util.update(AWS.DynamoDB.prototype, {\n    setupRequestListeners: function setupRequestListeners(request) {\n      if (request.service.config.dynamoDbCrc32) {\n        request.removeListener('extractData', AWS.EventListeners.Json.EXTRACT_DATA);\n        request.addListener('extractData', this.checkCrc32);\n        request.addListener('extractData', AWS.EventListeners.Json.EXTRACT_DATA);\n      }\n    },\n    checkCrc32: function checkCrc32(resp) {\n      if (!resp.httpResponse.streaming && !resp.request.service.crc32IsValid(resp)) {\n        resp.data = null;\n        resp.error = AWS.util.error(new Error(), {\n          code: 'CRC32CheckFailed',\n          message: 'CRC32 integrity check failed',\n          retryable: true\n        });\n        resp.request.haltHandlersOnError();\n        throw resp.error;\n      }\n    },\n    crc32IsValid: function crc32IsValid(resp) {\n      var crc = resp.httpResponse.headers['x-amz-crc32'];\n      if (!crc) return true;\n      return parseInt(crc, 10) === AWS.util.crypto.crc32(resp.httpResponse.body);\n    },\n    defaultRetryCount: 10,\n    retryDelays: function retryDelays(retryCount) {\n      var retryDelayOptions = AWS.util.copy(this.config.retryDelayOptions);\n\n      if (typeof retryDelayOptions.base !== 'number') {\n        retryDelayOptions.base = 50;\n      }\n\n      var delay = AWS.util.calculateRetryDelay(retryCount, retryDelayOptions);\n      return delay;\n    }\n  });\n});","map":[[2,0,1,0],[2,6,1,4,"AWS"],[2,9,1,7],[2,12,1,10,"require"],[2,23,1,17],[2,53,1,0],[4,0,2,0,"require"],[4,2,2,0,"require"],[4,13,2,7],[4,63,2,0],[6,0,4,0,"AWS"],[6,2,4,0,"AWS"],[6,5,4,3],[6,6,4,4,"util"],[6,10,4,0],[6,11,4,9,"update"],[6,17,4,0],[6,18,4,16,"AWS"],[6,21,4,19],[6,22,4,20,"DynamoDB"],[6,30,4,16],[6,31,4,29,"prototype"],[6,40,4,0],[6,42,4,40],[7,0,8,2,"setupRequestListeners"],[7,4,8,2,"setupRequestListeners"],[7,25,8,23],[7,27,8,25],[7,36,8,34,"setupRequestListeners"],[7,57,8,25],[7,58,8,56,"request"],[7,65,8,25],[7,67,8,65],[8,0,9,4],[8,10,9,8,"request"],[8,17,9,15],[8,18,9,16,"service"],[8,25,9,8],[8,26,9,24,"config"],[8,32,9,8],[8,33,9,31,"dynamoDbCrc32"],[8,46,9,4],[8,48,9,46],[9,0,10,6,"request"],[9,8,10,6,"request"],[9,15,10,13],[9,16,10,14,"removeListener"],[9,30,10,6],[9,31,10,29],[9,44,10,6],[9,46,10,44,"AWS"],[9,49,10,47],[9,50,10,48,"EventListeners"],[9,64,10,44],[9,65,10,63,"Json"],[9,69,10,44],[9,70,10,68,"EXTRACT_DATA"],[9,82,10,6],[10,0,11,6,"request"],[10,8,11,6,"request"],[10,15,11,13],[10,16,11,14,"addListener"],[10,27,11,6],[10,28,11,26],[10,41,11,6],[10,43,11,41],[10,48,11,46,"checkCrc32"],[10,58,11,6],[11,0,12,6,"request"],[11,8,12,6,"request"],[11,15,12,13],[11,16,12,14,"addListener"],[11,27,12,6],[11,28,12,26],[11,41,12,6],[11,43,12,41,"AWS"],[11,46,12,44],[11,47,12,45,"EventListeners"],[11,61,12,41],[11,62,12,60,"Json"],[11,66,12,41],[11,67,12,65,"EXTRACT_DATA"],[11,79,12,6],[12,0,13,5],[13,0,14,3],[13,5,4,40],[14,0,19,2,"checkCrc32"],[14,4,19,2,"checkCrc32"],[14,14,19,12],[14,16,19,14],[14,25,19,23,"checkCrc32"],[14,35,19,14],[14,36,19,34,"resp"],[14,40,19,14],[14,42,19,40],[15,0,20,4],[15,10,20,8],[15,11,20,9,"resp"],[15,15,20,13],[15,16,20,14,"httpResponse"],[15,28,20,9],[15,29,20,27,"streaming"],[15,38,20,8],[15,42,20,40],[15,43,20,41,"resp"],[15,47,20,45],[15,48,20,46,"request"],[15,55,20,41],[15,56,20,54,"service"],[15,63,20,41],[15,64,20,62,"crc32IsValid"],[15,76,20,41],[15,77,20,75,"resp"],[15,81,20,41],[15,82,20,4],[15,84,20,82],[16,0,21,6,"resp"],[16,8,21,6,"resp"],[16,12,21,10],[16,13,21,11,"data"],[16,17,21,6],[16,20,21,18],[16,24,21,6],[17,0,22,6,"resp"],[17,8,22,6,"resp"],[17,12,22,10],[17,13,22,11,"error"],[17,18,22,6],[17,21,22,19,"AWS"],[17,24,22,22],[17,25,22,23,"util"],[17,29,22,19],[17,30,22,28,"error"],[17,35,22,19],[17,36,22,34],[17,40,22,38,"Error"],[17,45,22,34],[17,47,22,19],[17,49,22,47],[18,0,23,8,"code"],[18,10,23,8,"code"],[18,14,23,12],[18,16,23,14],[18,34,22,47],[19,0,24,8,"message"],[19,10,24,8,"message"],[19,17,24,15],[19,19,24,17],[19,49,22,47],[20,0,25,8,"retryable"],[20,10,25,8,"retryable"],[20,19,25,17],[20,21,25,19],[21,0,22,47],[21,9,22,19],[21,10,22,6],[22,0,27,6,"resp"],[22,8,27,6,"resp"],[22,12,27,10],[22,13,27,11,"request"],[22,20,27,6],[22,21,27,19,"haltHandlersOnError"],[22,40,27,6],[23,0,28,6],[23,14,28,13,"resp"],[23,18,28,17],[23,19,28,18,"error"],[23,24,28,6],[24,0,29,5],[25,0,30,3],[25,5,4,40],[26,0,35,2,"crc32IsValid"],[26,4,35,2,"crc32IsValid"],[26,16,35,14],[26,18,35,16],[26,27,35,25,"crc32IsValid"],[26,39,35,16],[26,40,35,38,"resp"],[26,44,35,16],[26,46,35,44],[27,0,36,4],[27,10,36,8,"crc"],[27,13,36,11],[27,16,36,14,"resp"],[27,20,36,18],[27,21,36,19,"httpResponse"],[27,33,36,14],[27,34,36,32,"headers"],[27,41,36,14],[27,42,36,40],[27,55,36,14],[27,56,36,4],[28,0,37,4],[28,10,37,8],[28,11,37,9,"crc"],[28,14,37,4],[28,16,37,14],[28,23,37,21],[28,27,37,14],[29,0,38,4],[29,13,38,11,"parseInt"],[29,21,38,19],[29,22,38,20,"crc"],[29,25,38,19],[29,27,38,25],[29,29,38,19],[29,30,38,11],[29,35,38,33,"AWS"],[29,38,38,36],[29,39,38,37,"util"],[29,43,38,33],[29,44,38,42,"crypto"],[29,50,38,33],[29,51,38,49,"crc32"],[29,56,38,33],[29,57,38,55,"resp"],[29,61,38,59],[29,62,38,60,"httpResponse"],[29,74,38,55],[29,75,38,73,"body"],[29,79,38,33],[29,80,38,4],[30,0,39,3],[30,5,4,40],[31,0,44,2,"defaultRetryCount"],[31,4,44,2,"defaultRetryCount"],[31,21,44,19],[31,23,44,21],[31,25,4,40],[32,0,49,2,"retryDelays"],[32,4,49,2,"retryDelays"],[32,15,49,13],[32,17,49,15],[32,26,49,24,"retryDelays"],[32,37,49,15],[32,38,49,36,"retryCount"],[32,48,49,15],[32,50,49,48],[33,0,50,4],[33,10,50,8,"retryDelayOptions"],[33,27,50,25],[33,30,50,28,"AWS"],[33,33,50,31],[33,34,50,32,"util"],[33,38,50,28],[33,39,50,37,"copy"],[33,43,50,28],[33,44,50,42],[33,49,50,47,"config"],[33,55,50,42],[33,56,50,54,"retryDelayOptions"],[33,73,50,28],[33,74,50,4],[35,0,52,4],[35,10,52,8],[35,17,52,15,"retryDelayOptions"],[35,34,52,32],[35,35,52,33,"base"],[35,39,52,8],[35,44,52,42],[35,52,52,4],[35,54,52,52],[36,0,53,8,"retryDelayOptions"],[36,8,53,8,"retryDelayOptions"],[36,25,53,25],[36,26,53,26,"base"],[36,30,53,8],[36,33,53,33],[36,35,53,8],[37,0,54,5],[39,0,55,4],[39,10,55,8,"delay"],[39,15,55,13],[39,18,55,16,"AWS"],[39,21,55,19],[39,22,55,20,"util"],[39,26,55,16],[39,27,55,25,"calculateRetryDelay"],[39,46,55,16],[39,47,55,45,"retryCount"],[39,57,55,16],[39,59,55,57,"retryDelayOptions"],[39,76,55,16],[39,77,55,4],[40,0,56,4],[40,13,56,11,"delay"],[40,18,56,4],[41,0,57,3],[42,0,4,40],[42,3,4,0]]},"type":"js/module"}]}