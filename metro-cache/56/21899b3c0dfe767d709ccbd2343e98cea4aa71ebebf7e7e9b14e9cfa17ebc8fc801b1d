{"dependencies":[{"name":"../core","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var AWS = _$$_REQUIRE(_dependencyMap[0], \"../core\");\n\n  var service = null;\n  var api = {\n    signatureVersion: 'v4',\n    signingName: 'rds-db'\n  };\n  var requiredAuthTokenOptions = {\n    region: 'string',\n    hostname: 'string',\n    port: 'number',\n    username: 'string'\n  };\n  AWS.RDS.Signer = AWS.util.inherit({\n    constructor: function Signer(options) {\n      this.options = options || {};\n    },\n    convertUrlToAuthToken: function convertUrlToAuthToken(url) {\n      var protocol = 'https://';\n\n      if (url.indexOf(protocol) === 0) {\n        return url.substring(protocol.length);\n      }\n    },\n    getAuthToken: function getAuthToken(options, callback) {\n      if (typeof options === 'function' && callback === undefined) {\n        callback = options;\n        options = {};\n      }\n\n      var self = this;\n      var hasCallback = typeof callback === 'function';\n      options = AWS.util.merge(this.options, options);\n      var optionsValidation = this.validateAuthTokenOptions(options);\n\n      if (optionsValidation !== true) {\n        if (hasCallback) {\n          return callback(optionsValidation, null);\n        }\n\n        throw optionsValidation;\n      }\n\n      var expires = 900;\n      var serviceOptions = {\n        region: options.region,\n        endpoint: new AWS.Endpoint(options.hostname + ':' + options.port),\n        paramValidation: false,\n        signatureVersion: 'v4'\n      };\n\n      if (options.credentials) {\n        serviceOptions.credentials = options.credentials;\n      }\n\n      service = new AWS.Service(serviceOptions);\n      service.api = api;\n      var request = service.makeRequest();\n      this.modifyRequestForAuthToken(request, options);\n\n      if (hasCallback) {\n        request.presign(expires, function (err, url) {\n          if (url) {\n            url = self.convertUrlToAuthToken(url);\n          }\n\n          callback(err, url);\n        });\n      } else {\n        var url = request.presign(expires);\n        return this.convertUrlToAuthToken(url);\n      }\n    },\n    modifyRequestForAuthToken: function modifyRequestForAuthToken(request, options) {\n      request.on('build', request.buildAsGet);\n      var httpRequest = request.httpRequest;\n      httpRequest.body = AWS.util.queryParamsToString({\n        Action: 'connect',\n        DBUser: options.username\n      });\n    },\n    validateAuthTokenOptions: function validateAuthTokenOptions(options) {\n      var message = '';\n      options = options || {};\n\n      for (var key in requiredAuthTokenOptions) {\n        if (!Object.prototype.hasOwnProperty.call(requiredAuthTokenOptions, key)) {\n          continue;\n        }\n\n        if (typeof options[key] !== requiredAuthTokenOptions[key]) {\n          message += 'option \\'' + key + '\\' should have been type \\'' + requiredAuthTokenOptions[key] + '\\', was \\'' + typeof options[key] + '\\'.\\n';\n        }\n      }\n\n      if (message.length) {\n        return AWS.util.error(new Error(), {\n          code: 'InvalidParameter',\n          message: message\n        });\n      }\n\n      return true;\n    }\n  });\n});","map":[[2,0,1,0],[2,6,1,4,"AWS"],[2,9,1,7],[2,12,1,10,"require"],[2,23,1,17],[2,53,1,0],[4,0,6,0],[4,6,6,4,"service"],[4,13,6,11],[4,16,6,14],[4,20,6,0],[5,0,11,0],[5,6,11,4,"api"],[5,9,11,7],[5,12,11,10],[6,0,12,4,"signatureVersion"],[6,4,12,4,"signatureVersion"],[6,20,12,20],[6,22,12,22],[6,26,11,10],[7,0,13,4,"signingName"],[7,4,13,4,"signingName"],[7,15,13,15],[7,17,13,17],[8,0,11,10],[8,3,11,0],[9,0,19,0],[9,6,19,4,"requiredAuthTokenOptions"],[9,30,19,28],[9,33,19,31],[10,0,20,4,"region"],[10,4,20,4,"region"],[10,10,20,10],[10,12,20,12],[10,20,19,31],[11,0,21,4,"hostname"],[11,4,21,4,"hostname"],[11,12,21,12],[11,14,21,14],[11,22,19,31],[12,0,22,4,"port"],[12,4,22,4,"port"],[12,8,22,8],[12,10,22,10],[12,18,19,31],[13,0,23,4,"username"],[13,4,23,4,"username"],[13,12,23,12],[13,14,23,14],[14,0,19,31],[14,3,19,0],[15,0,29,0,"AWS"],[15,2,29,0,"AWS"],[15,5,29,3],[15,6,29,4,"RDS"],[15,9,29,0],[15,10,29,8,"Signer"],[15,16,29,0],[15,19,29,17,"AWS"],[15,22,29,20],[15,23,29,21,"util"],[15,27,29,17],[15,28,29,26,"inherit"],[15,35,29,17],[15,36,29,34],[16,0,49,4,"constructor"],[16,4,49,4,"constructor"],[16,15,49,15],[16,17,49,17],[16,26,49,26,"Signer"],[16,32,49,17],[16,33,49,33,"options"],[16,40,49,17],[16,42,49,42],[17,0,50,8],[17,11,50,13,"options"],[17,18,50,8],[17,21,50,23,"options"],[17,28,50,30],[17,32,50,34],[17,34,50,8],[18,0,51,5],[18,5,29,34],[19,0,57,4,"convertUrlToAuthToken"],[19,4,57,4,"convertUrlToAuthToken"],[19,25,57,25],[19,27,57,27],[19,36,57,36,"convertUrlToAuthToken"],[19,57,57,27],[19,58,57,58,"url"],[19,61,57,27],[19,63,57,63],[20,0,59,8],[20,10,59,12,"protocol"],[20,18,59,20],[20,21,59,23],[20,31,59,8],[22,0,60,8],[22,10,60,12,"url"],[22,13,60,15],[22,14,60,16,"indexOf"],[22,21,60,12],[22,22,60,24,"protocol"],[22,30,60,12],[22,36,60,38],[22,37,60,8],[22,39,60,41],[23,0,61,12],[23,15,61,19,"url"],[23,18,61,22],[23,19,61,23,"substring"],[23,28,61,19],[23,29,61,33,"protocol"],[23,37,61,41],[23,38,61,42,"length"],[23,44,61,19],[23,45,61,12],[24,0,62,9],[25,0,63,5],[25,5,29,34],[26,0,128,4,"getAuthToken"],[26,4,128,4,"getAuthToken"],[26,16,128,16],[26,18,128,18],[26,27,128,27,"getAuthToken"],[26,39,128,18],[26,40,128,40,"options"],[26,47,128,18],[26,49,128,49,"callback"],[26,57,128,18],[26,59,128,59],[27,0,129,8],[27,10,129,12],[27,17,129,19,"options"],[27,24,129,12],[27,29,129,31],[27,39,129,12],[27,43,129,45,"callback"],[27,51,129,53],[27,56,129,58,"undefined"],[27,65,129,8],[27,67,129,69],[28,0,130,12,"callback"],[28,8,130,12,"callback"],[28,16,130,20],[28,19,130,23,"options"],[28,26,130,12],[29,0,131,12,"options"],[29,8,131,12,"options"],[29,15,131,19],[29,18,131,22],[29,20,131,12],[30,0,132,9],[32,0,133,8],[32,10,133,12,"self"],[32,14,133,16],[32,17,133,19],[32,21,133,8],[33,0,134,8],[33,10,134,12,"hasCallback"],[33,21,134,23],[33,24,134,26],[33,31,134,33,"callback"],[33,39,134,26],[33,44,134,46],[33,54,134,8],[34,0,136,8,"options"],[34,6,136,8,"options"],[34,13,136,15],[34,16,136,18,"AWS"],[34,19,136,21],[34,20,136,22,"util"],[34,24,136,18],[34,25,136,27,"merge"],[34,30,136,18],[34,31,136,33],[34,36,136,38,"options"],[34,43,136,18],[34,45,136,47,"options"],[34,52,136,18],[34,53,136,8],[35,0,138,8],[35,10,138,12,"optionsValidation"],[35,27,138,29],[35,30,138,32],[35,35,138,37,"validateAuthTokenOptions"],[35,59,138,32],[35,60,138,62,"options"],[35,67,138,32],[35,68,138,8],[37,0,139,8],[37,10,139,12,"optionsValidation"],[37,27,139,29],[37,32,139,34],[37,36,139,8],[37,38,139,40],[38,0,140,12],[38,12,140,16,"hasCallback"],[38,23,140,12],[38,25,140,29],[39,0,141,16],[39,17,141,23,"callback"],[39,25,141,31],[39,26,141,32,"optionsValidation"],[39,43,141,31],[39,45,141,51],[39,49,141,31],[39,50,141,16],[40,0,142,13],[42,0,143,12],[42,14,143,18,"optionsValidation"],[42,31,143,12],[43,0,144,9],[45,0,147,8],[45,10,147,12,"expires"],[45,17,147,19],[45,20,147,22],[45,23,147,8],[46,0,149,8],[46,10,149,12,"serviceOptions"],[46,24,149,26],[46,27,149,29],[47,0,150,12,"region"],[47,8,150,12,"region"],[47,14,150,18],[47,16,150,20,"options"],[47,23,150,27],[47,24,150,28,"region"],[47,30,149,29],[48,0,151,12,"endpoint"],[48,8,151,12,"endpoint"],[48,16,151,20],[48,18,151,22],[48,22,151,26,"AWS"],[48,25,151,29],[48,26,151,30,"Endpoint"],[48,34,151,22],[48,35,151,39,"options"],[48,42,151,46],[48,43,151,47,"hostname"],[48,51,151,39],[48,54,151,58],[48,57,151,39],[48,60,151,64,"options"],[48,67,151,71],[48,68,151,72,"port"],[48,72,151,22],[48,73,149,29],[49,0,152,12,"paramValidation"],[49,8,152,12,"paramValidation"],[49,23,152,27],[49,25,152,29],[49,30,149,29],[50,0,153,12,"signatureVersion"],[50,8,153,12,"signatureVersion"],[50,24,153,28],[50,26,153,30],[51,0,149,29],[51,7,149,8],[53,0,155,8],[53,10,155,12,"options"],[53,17,155,19],[53,18,155,20,"credentials"],[53,29,155,8],[53,31,155,33],[54,0,156,12,"serviceOptions"],[54,8,156,12,"serviceOptions"],[54,22,156,26],[54,23,156,27,"credentials"],[54,34,156,12],[54,37,156,41,"options"],[54,44,156,48],[54,45,156,49,"credentials"],[54,56,156,12],[55,0,157,9],[57,0,158,8,"service"],[57,6,158,8,"service"],[57,13,158,15],[57,16,158,18],[57,20,158,22,"AWS"],[57,23,158,25],[57,24,158,26,"Service"],[57,31,158,18],[57,32,158,34,"serviceOptions"],[57,46,158,18],[57,47,158,8],[58,0,160,8,"service"],[58,6,160,8,"service"],[58,13,160,15],[58,14,160,16,"api"],[58,17,160,8],[58,20,160,22,"api"],[58,23,160,8],[59,0,162,8],[59,10,162,12,"request"],[59,17,162,19],[59,20,162,22,"service"],[59,27,162,29],[59,28,162,30,"makeRequest"],[59,39,162,22],[59,41,162,8],[60,0,164,8],[60,11,164,13,"modifyRequestForAuthToken"],[60,36,164,8],[60,37,164,39,"request"],[60,44,164,8],[60,46,164,48,"options"],[60,53,164,8],[62,0,166,8],[62,10,166,12,"hasCallback"],[62,21,166,8],[62,23,166,25],[63,0,167,12,"request"],[63,8,167,12,"request"],[63,15,167,19],[63,16,167,20,"presign"],[63,23,167,12],[63,24,167,28,"expires"],[63,31,167,12],[63,33,167,37],[63,43,167,46,"err"],[63,46,167,37],[63,48,167,51,"url"],[63,51,167,37],[63,53,167,56],[64,0,168,16],[64,14,168,20,"url"],[64,17,168,16],[64,19,168,25],[65,0,169,20,"url"],[65,12,169,20,"url"],[65,15,169,23],[65,18,169,26,"self"],[65,22,169,30],[65,23,169,31,"convertUrlToAuthToken"],[65,44,169,26],[65,45,169,53,"url"],[65,48,169,26],[65,49,169,20],[66,0,170,17],[68,0,171,16,"callback"],[68,10,171,16,"callback"],[68,18,171,24],[68,19,171,25,"err"],[68,22,171,24],[68,24,171,30,"url"],[68,27,171,24],[68,28,171,16],[69,0,172,13],[69,9,167,12],[70,0,173,9],[70,7,166,8],[70,13,173,15],[71,0,174,12],[71,12,174,16,"url"],[71,15,174,19],[71,18,174,22,"request"],[71,25,174,29],[71,26,174,30,"presign"],[71,33,174,22],[71,34,174,38,"expires"],[71,41,174,22],[71,42,174,12],[72,0,175,12],[72,15,175,19],[72,20,175,24,"convertUrlToAuthToken"],[72,41,175,19],[72,42,175,46,"url"],[72,45,175,19],[72,46,175,12],[73,0,176,9],[74,0,177,5],[74,5,29,34],[75,0,183,4,"modifyRequestForAuthToken"],[75,4,183,4,"modifyRequestForAuthToken"],[75,29,183,29],[75,31,183,31],[75,40,183,40,"modifyRequestForAuthToken"],[75,65,183,31],[75,66,183,66,"request"],[75,73,183,31],[75,75,183,75,"options"],[75,82,183,31],[75,84,183,84],[76,0,184,8,"request"],[76,6,184,8,"request"],[76,13,184,15],[76,14,184,16,"on"],[76,16,184,8],[76,17,184,19],[76,24,184,8],[76,26,184,28,"request"],[76,33,184,35],[76,34,184,36,"buildAsGet"],[76,44,184,8],[77,0,185,8],[77,10,185,12,"httpRequest"],[77,21,185,23],[77,24,185,26,"request"],[77,31,185,33],[77,32,185,34,"httpRequest"],[77,43,185,8],[78,0,186,8,"httpRequest"],[78,6,186,8,"httpRequest"],[78,17,186,19],[78,18,186,20,"body"],[78,22,186,8],[78,25,186,27,"AWS"],[78,28,186,30],[78,29,186,31,"util"],[78,33,186,27],[78,34,186,36,"queryParamsToString"],[78,53,186,27],[78,54,186,56],[79,0,187,12,"Action"],[79,8,187,12,"Action"],[79,14,187,18],[79,16,187,20],[79,25,186,56],[80,0,188,12,"DBUser"],[80,8,188,12,"DBUser"],[80,14,188,18],[80,16,188,20,"options"],[80,23,188,27],[80,24,188,28,"username"],[81,0,186,56],[81,7,186,27],[81,8,186,8],[82,0,190,5],[82,5,29,34],[83,0,197,4,"validateAuthTokenOptions"],[83,4,197,4,"validateAuthTokenOptions"],[83,28,197,28],[83,30,197,30],[83,39,197,39,"validateAuthTokenOptions"],[83,63,197,30],[83,64,197,64,"options"],[83,71,197,30],[83,73,197,73],[84,0,199,8],[84,10,199,12,"message"],[84,17,199,19],[84,20,199,22],[84,22,199,8],[85,0,200,8,"options"],[85,6,200,8,"options"],[85,13,200,15],[85,16,200,18,"options"],[85,23,200,25],[85,27,200,29],[85,29,200,8],[87,0,201,8],[87,11,201,13],[87,15,201,17,"key"],[87,18,201,8],[87,22,201,24,"requiredAuthTokenOptions"],[87,46,201,8],[87,48,201,50],[88,0,202,12],[88,12,202,16],[88,13,202,17,"Object"],[88,19,202,23],[88,20,202,24,"prototype"],[88,29,202,17],[88,30,202,34,"hasOwnProperty"],[88,44,202,17],[88,45,202,49,"call"],[88,49,202,17],[88,50,202,54,"requiredAuthTokenOptions"],[88,74,202,17],[88,76,202,80,"key"],[88,79,202,17],[88,80,202,12],[88,82,202,86],[89,0,203,16],[90,0,204,13],[92,0,205,12],[92,12,205,16],[92,19,205,23,"options"],[92,26,205,30],[92,27,205,31,"key"],[92,30,205,30],[92,31,205,16],[92,36,205,40,"requiredAuthTokenOptions"],[92,60,205,64],[92,61,205,65,"key"],[92,64,205,64],[92,65,205,12],[92,67,205,71],[93,0,206,16,"message"],[93,10,206,16,"message"],[93,17,206,23],[93,21,206,27],[93,35,206,41,"key"],[93,38,206,27],[93,41,206,47],[93,70,206,27],[93,73,206,79,"requiredAuthTokenOptions"],[93,97,206,103],[93,98,206,104,"key"],[93,101,206,103],[93,102,206,27],[93,105,206,111],[93,117,206,27],[93,120,206,126],[93,127,206,133,"options"],[93,134,206,140],[93,135,206,141,"key"],[93,138,206,140],[93,139,206,27],[93,142,206,148],[93,149,206,16],[94,0,207,13],[95,0,208,9],[97,0,209,8],[97,10,209,12,"message"],[97,17,209,19],[97,18,209,20,"length"],[97,24,209,8],[97,26,209,28],[98,0,210,12],[98,15,210,19,"AWS"],[98,18,210,22],[98,19,210,23,"util"],[98,23,210,19],[98,24,210,28,"error"],[98,29,210,19],[98,30,210,34],[98,34,210,38,"Error"],[98,39,210,34],[98,41,210,19],[98,43,210,47],[99,0,211,16,"code"],[99,10,211,16,"code"],[99,14,211,20],[99,16,211,22],[99,34,210,47],[100,0,212,16,"message"],[100,10,212,16,"message"],[100,17,212,23],[100,19,212,25,"message"],[101,0,210,47],[101,9,210,19],[101,10,210,12],[102,0,214,9],[104,0,215,8],[104,13,215,15],[104,17,215,8],[105,0,216,5],[106,0,29,34],[106,3,29,17],[106,4,29,0]]},"type":"js/module"}]}