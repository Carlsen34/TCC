{"dependencies":[{"name":"../core","data":{"isAsync":false}},{"name":"../../clients/sts","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var AWS = _$$_REQUIRE(_dependencyMap[0], \"../core\");\n\n  var STS = _$$_REQUIRE(_dependencyMap[1], \"../../clients/sts\");\n\n  AWS.ChainableTemporaryCredentials = AWS.util.inherit(AWS.Credentials, {\n    constructor: function ChainableTemporaryCredentials(options) {\n      AWS.Credentials.call(this);\n      options = options || {};\n      this.errorCode = 'ChainableTemporaryCredentialsProviderFailure';\n      this.expired = true;\n      this.tokenCodeFn = null;\n      var params = AWS.util.copy(options.params) || {};\n\n      if (params.RoleArn) {\n        params.RoleSessionName = params.RoleSessionName || 'temporary-credentials';\n      }\n\n      if (params.SerialNumber) {\n        if (!options.tokenCodeFn || typeof options.tokenCodeFn !== 'function') {\n          throw new AWS.util.error(new Error('tokenCodeFn must be a function when params.SerialNumber is given'), {\n            code: this.errorCode\n          });\n        } else {\n          this.tokenCodeFn = options.tokenCodeFn;\n        }\n      }\n\n      this.service = new STS({\n        params: params,\n        credentials: options.masterCredentials || AWS.config.credentials\n      });\n    },\n    refresh: function refresh(callback) {\n      this.coalesceRefresh(callback || AWS.util.fn.callback);\n    },\n    load: function load(callback) {\n      var self = this;\n      var operation = self.service.config.params.RoleArn ? 'assumeRole' : 'getSessionToken';\n      this.getTokenCode(function (err, tokenCode) {\n        var params = {};\n\n        if (err) {\n          callback(err);\n          return;\n        }\n\n        if (tokenCode) {\n          params.TokenCode = tokenCode;\n        }\n\n        self.service[operation](params, function (err, data) {\n          if (!err) {\n            self.service.credentialsFrom(data, self);\n          }\n\n          callback(err);\n        });\n      });\n    },\n    getTokenCode: function getTokenCode(callback) {\n      var self = this;\n\n      if (this.tokenCodeFn) {\n        this.tokenCodeFn(this.service.config.params.SerialNumber, function (err, token) {\n          if (err) {\n            var message = err;\n\n            if (err instanceof Error) {\n              message = err.message;\n            }\n\n            callback(AWS.util.error(new Error('Error fetching MFA token: ' + message), {\n              code: self.errorCode\n            }));\n            return;\n          }\n\n          callback(null, token);\n        });\n      } else {\n        callback(null);\n      }\n    }\n  });\n});","map":[[2,0,1,0],[2,6,1,4,"AWS"],[2,9,1,7],[2,12,1,10,"require"],[2,23,1,17],[2,53,1,0],[4,0,2,0],[4,6,2,4,"STS"],[4,9,2,7],[4,12,2,10,"require"],[4,23,2,17],[4,63,2,0],[6,0,72,0,"AWS"],[6,2,72,0,"AWS"],[6,5,72,3],[6,6,72,4,"ChainableTemporaryCredentials"],[6,35,72,0],[6,38,72,36,"AWS"],[6,41,72,39],[6,42,72,40,"util"],[6,46,72,36],[6,47,72,45,"inherit"],[6,54,72,36],[6,55,72,53,"AWS"],[6,58,72,56],[6,59,72,57,"Credentials"],[6,70,72,36],[6,72,72,70],[7,0,101,2,"constructor"],[7,4,101,2,"constructor"],[7,15,101,13],[7,17,101,15],[7,26,101,24,"ChainableTemporaryCredentials"],[7,55,101,15],[7,56,101,54,"options"],[7,63,101,15],[7,65,101,63],[8,0,102,4,"AWS"],[8,6,102,4,"AWS"],[8,9,102,7],[8,10,102,8,"Credentials"],[8,21,102,4],[8,22,102,20,"call"],[8,26,102,4],[8,27,102,25],[8,31,102,4],[9,0,103,4,"options"],[9,6,103,4,"options"],[9,13,103,11],[9,16,103,14,"options"],[9,23,103,21],[9,27,103,25],[9,29,103,4],[10,0,104,4],[10,11,104,9,"errorCode"],[10,20,104,4],[10,23,104,21],[10,69,104,4],[11,0,105,4],[11,11,105,9,"expired"],[11,18,105,4],[11,21,105,19],[11,25,105,4],[12,0,106,4],[12,11,106,9,"tokenCodeFn"],[12,22,106,4],[12,25,106,23],[12,29,106,4],[13,0,108,4],[13,10,108,8,"params"],[13,16,108,14],[13,19,108,17,"AWS"],[13,22,108,20],[13,23,108,21,"util"],[13,27,108,17],[13,28,108,26,"copy"],[13,32,108,17],[13,33,108,31,"options"],[13,40,108,38],[13,41,108,39,"params"],[13,47,108,17],[13,52,108,50],[13,54,108,4],[15,0,109,4],[15,10,109,8,"params"],[15,16,109,14],[15,17,109,15,"RoleArn"],[15,24,109,4],[15,26,109,24],[16,0,110,6,"params"],[16,8,110,6,"params"],[16,14,110,12],[16,15,110,13,"RoleSessionName"],[16,30,110,6],[16,33,110,31,"params"],[16,39,110,37],[16,40,110,38,"RoleSessionName"],[16,55,110,31],[16,59,110,57],[16,82,110,6],[17,0,111,5],[19,0,112,4],[19,10,112,8,"params"],[19,16,112,14],[19,17,112,15,"SerialNumber"],[19,29,112,4],[19,31,112,29],[20,0,113,6],[20,12,113,10],[20,13,113,11,"options"],[20,20,113,18],[20,21,113,19,"tokenCodeFn"],[20,32,113,10],[20,36,113,35],[20,43,113,42,"options"],[20,50,113,49],[20,51,113,50,"tokenCodeFn"],[20,62,113,35],[20,67,113,66],[20,77,113,6],[20,79,113,79],[21,0,114,8],[21,16,114,14],[21,20,114,18,"AWS"],[21,23,114,21],[21,24,114,22,"util"],[21,28,114,18],[21,29,114,27,"error"],[21,34,114,14],[21,35,115,10],[21,39,115,14,"Error"],[21,44,115,10],[21,45,115,20],[21,111,115,10],[21,112,114,14],[21,114,116,10],[22,0,116,11,"code"],[22,12,116,11,"code"],[22,16,116,15],[22,18,116,17],[22,23,116,22,"errorCode"],[23,0,116,10],[23,11,114,14],[23,12,114,8],[24,0,118,7],[24,9,113,6],[24,15,118,13],[25,0,119,8],[25,15,119,13,"tokenCodeFn"],[25,26,119,8],[25,29,119,27,"options"],[25,36,119,34],[25,37,119,35,"tokenCodeFn"],[25,48,119,8],[26,0,120,7],[27,0,121,5],[29,0,122,4],[29,11,122,9,"service"],[29,18,122,4],[29,21,122,19],[29,25,122,23,"STS"],[29,28,122,19],[29,29,122,27],[30,0,123,6,"params"],[30,8,123,6,"params"],[30,14,123,12],[30,16,123,14,"params"],[30,22,122,27],[31,0,124,6,"credentials"],[31,8,124,6,"credentials"],[31,19,124,17],[31,21,124,19,"options"],[31,28,124,26],[31,29,124,27,"masterCredentials"],[31,46,124,19],[31,50,124,48,"AWS"],[31,53,124,51],[31,54,124,52,"config"],[31,60,124,48],[31,61,124,59,"credentials"],[32,0,122,27],[32,7,122,19],[32,8,122,4],[33,0,126,3],[33,5,72,70],[34,0,141,2,"refresh"],[34,4,141,2,"refresh"],[34,11,141,9],[34,13,141,11],[34,22,141,20,"refresh"],[34,29,141,11],[34,30,141,28,"callback"],[34,38,141,11],[34,40,141,38],[35,0,142,4],[35,11,142,9,"coalesceRefresh"],[35,26,142,4],[35,27,142,25,"callback"],[35,35,142,33],[35,39,142,37,"AWS"],[35,42,142,40],[35,43,142,41,"util"],[35,47,142,37],[35,48,142,46,"fn"],[35,50,142,37],[35,51,142,49,"callback"],[35,59,142,4],[36,0,143,3],[36,5,72,70],[37,0,149,2,"load"],[37,4,149,2,"load"],[37,8,149,6],[37,10,149,8],[37,19,149,17,"load"],[37,23,149,8],[37,24,149,22,"callback"],[37,32,149,8],[37,34,149,32],[38,0,150,4],[38,10,150,8,"self"],[38,14,150,12],[38,17,150,15],[38,21,150,4],[39,0,151,4],[39,10,151,8,"operation"],[39,19,151,17],[39,22,151,20,"self"],[39,26,151,24],[39,27,151,25,"service"],[39,34,151,20],[39,35,151,33,"config"],[39,41,151,20],[39,42,151,40,"params"],[39,48,151,20],[39,49,151,47,"RoleArn"],[39,56,151,20],[39,59,151,57],[39,71,151,20],[39,74,151,72],[39,91,151,4],[40,0,152,4],[40,11,152,9,"getTokenCode"],[40,23,152,4],[40,24,152,22],[40,34,152,32,"err"],[40,37,152,22],[40,39,152,37,"tokenCode"],[40,48,152,22],[40,50,152,48],[41,0,153,6],[41,12,153,10,"params"],[41,18,153,16],[41,21,153,19],[41,23,153,6],[43,0,154,6],[43,12,154,10,"err"],[43,15,154,6],[43,17,154,15],[44,0,155,8,"callback"],[44,10,155,8,"callback"],[44,18,155,16],[44,19,155,17,"err"],[44,22,155,16],[44,23,155,8],[45,0,156,8],[46,0,157,7],[48,0,158,6],[48,12,158,10,"tokenCode"],[48,21,158,6],[48,23,158,21],[49,0,159,8,"params"],[49,10,159,8,"params"],[49,16,159,14],[49,17,159,15,"TokenCode"],[49,26,159,8],[49,29,159,27,"tokenCode"],[49,38,159,8],[50,0,160,7],[52,0,161,6,"self"],[52,8,161,6,"self"],[52,12,161,10],[52,13,161,11,"service"],[52,20,161,6],[52,21,161,19,"operation"],[52,30,161,6],[52,32,161,30,"params"],[52,38,161,6],[52,40,161,38],[52,50,161,48,"err"],[52,53,161,38],[52,55,161,53,"data"],[52,59,161,38],[52,61,161,59],[53,0,162,8],[53,14,162,12],[53,15,162,13,"err"],[53,18,162,8],[53,20,162,18],[54,0,163,10,"self"],[54,12,163,10,"self"],[54,16,163,14],[54,17,163,15,"service"],[54,24,163,10],[54,25,163,23,"credentialsFrom"],[54,40,163,10],[54,41,163,39,"data"],[54,45,163,10],[54,47,163,45,"self"],[54,51,163,10],[55,0,164,9],[57,0,165,8,"callback"],[57,10,165,8,"callback"],[57,18,165,16],[57,19,165,17,"err"],[57,22,165,16],[57,23,165,8],[58,0,166,7],[58,9,161,6],[59,0,167,5],[59,7,152,4],[60,0,168,3],[60,5,72,70],[61,0,173,2,"getTokenCode"],[61,4,173,2,"getTokenCode"],[61,16,173,14],[61,18,173,16],[61,27,173,25,"getTokenCode"],[61,39,173,16],[61,40,173,38,"callback"],[61,48,173,16],[61,50,173,48],[62,0,174,4],[62,10,174,8,"self"],[62,14,174,12],[62,17,174,15],[62,21,174,4],[64,0,175,4],[64,10,175,8],[64,15,175,13,"tokenCodeFn"],[64,26,175,4],[64,28,175,26],[65,0,176,6],[65,13,176,11,"tokenCodeFn"],[65,24,176,6],[65,25,176,23],[65,30,176,28,"service"],[65,37,176,23],[65,38,176,36,"config"],[65,44,176,23],[65,45,176,43,"params"],[65,51,176,23],[65,52,176,50,"SerialNumber"],[65,64,176,6],[65,66,176,64],[65,76,176,74,"err"],[65,79,176,64],[65,81,176,79,"token"],[65,86,176,64],[65,88,176,86],[66,0,177,8],[66,14,177,12,"err"],[66,17,177,8],[66,19,177,17],[67,0,178,10],[67,16,178,14,"message"],[67,23,178,21],[67,26,178,24,"err"],[67,29,178,10],[69,0,179,10],[69,16,179,14,"err"],[69,19,179,17],[69,31,179,29,"Error"],[69,36,179,10],[69,38,179,36],[70,0,180,12,"message"],[70,14,180,12,"message"],[70,21,180,19],[70,24,180,22,"err"],[70,27,180,25],[70,28,180,26,"message"],[70,35,180,12],[71,0,181,11],[73,0,182,10,"callback"],[73,12,182,10,"callback"],[73,20,182,18],[73,21,183,12,"AWS"],[73,24,183,15],[73,25,183,16,"util"],[73,29,183,12],[73,30,183,21,"error"],[73,35,183,12],[73,36,184,14],[73,40,184,18,"Error"],[73,45,184,14],[73,46,184,24],[73,77,184,55,"message"],[73,84,184,14],[73,85,183,12],[73,87,185,14],[74,0,185,16,"code"],[74,14,185,16,"code"],[74,18,185,20],[74,20,185,22,"self"],[74,24,185,26],[74,25,185,27,"errorCode"],[75,0,185,14],[75,13,183,12],[75,14,182,18],[75,15,182,10],[76,0,188,10],[77,0,189,9],[79,0,190,8,"callback"],[79,10,190,8,"callback"],[79,18,190,16],[79,19,190,17],[79,23,190,16],[79,25,190,23,"token"],[79,30,190,16],[79,31,190,8],[80,0,191,7],[80,9,176,6],[81,0,192,5],[81,7,175,4],[81,13,192,11],[82,0,193,6,"callback"],[82,8,193,6,"callback"],[82,16,193,14],[82,17,193,15],[82,21,193,14],[82,22,193,6],[83,0,194,5],[84,0,195,3],[85,0,72,70],[85,3,72,36],[85,4,72,0]]},"type":"js/module"}]}