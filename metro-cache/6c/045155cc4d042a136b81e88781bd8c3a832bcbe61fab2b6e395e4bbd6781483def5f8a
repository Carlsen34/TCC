{"dependencies":[{"name":"../core","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var AWS = _$$_REQUIRE(_dependencyMap[0], \"../core\");\n\n  AWS.util.update(AWS.EC2.prototype, {\n    setupRequestListeners: function setupRequestListeners(request) {\n      request.removeListener('extractError', AWS.EventListeners.Query.EXTRACT_ERROR);\n      request.addListener('extractError', this.extractError);\n\n      if (request.operation === 'copySnapshot') {\n        request.onAsync('validate', this.buildCopySnapshotPresignedUrl);\n      }\n    },\n    buildCopySnapshotPresignedUrl: function buildCopySnapshotPresignedUrl(req, done) {\n      if (req.params.PresignedUrl || req._subRequest) {\n        return done();\n      }\n\n      req.params = AWS.util.copy(req.params);\n      req.params.DestinationRegion = req.service.config.region;\n      var config = AWS.util.copy(req.service.config);\n      delete config.endpoint;\n      config.region = req.params.SourceRegion;\n      var svc = new req.service.constructor(config);\n      var newReq = svc[req.operation](req.params);\n      newReq._subRequest = true;\n      newReq.presign(function (err, url) {\n        if (err) done(err);else {\n          req.params.PresignedUrl = url;\n          done();\n        }\n      });\n    },\n    extractError: function extractError(resp) {\n      var httpResponse = resp.httpResponse;\n      var data = new AWS.XML.Parser().parse(httpResponse.body.toString() || '');\n\n      if (data.Errors) {\n        resp.error = AWS.util.error(new Error(), {\n          code: data.Errors.Error.Code,\n          message: data.Errors.Error.Message\n        });\n      } else {\n        resp.error = AWS.util.error(new Error(), {\n          code: httpResponse.statusCode,\n          message: null\n        });\n      }\n\n      resp.error.requestId = data.RequestID || null;\n    }\n  });\n});","map":[[2,0,1,0],[2,6,1,4,"AWS"],[2,9,1,7],[2,12,1,10,"require"],[2,23,1,17],[2,53,1,0],[4,0,3,0,"AWS"],[4,2,3,0,"AWS"],[4,5,3,3],[4,6,3,4,"util"],[4,10,3,0],[4,11,3,9,"update"],[4,17,3,0],[4,18,3,16,"AWS"],[4,21,3,19],[4,22,3,20,"EC2"],[4,25,3,16],[4,26,3,24,"prototype"],[4,35,3,0],[4,37,3,35],[5,0,7,2,"setupRequestListeners"],[5,4,7,2,"setupRequestListeners"],[5,25,7,23],[5,27,7,25],[5,36,7,34,"setupRequestListeners"],[5,57,7,25],[5,58,7,56,"request"],[5,65,7,25],[5,67,7,65],[6,0,8,4,"request"],[6,6,8,4,"request"],[6,13,8,11],[6,14,8,12,"removeListener"],[6,28,8,4],[6,29,8,27],[6,43,8,4],[6,45,8,43,"AWS"],[6,48,8,46],[6,49,8,47,"EventListeners"],[6,63,8,43],[6,64,8,62,"Query"],[6,69,8,43],[6,70,8,68,"EXTRACT_ERROR"],[6,83,8,4],[7,0,9,4,"request"],[7,6,9,4,"request"],[7,13,9,11],[7,14,9,12,"addListener"],[7,25,9,4],[7,26,9,24],[7,40,9,4],[7,42,9,40],[7,47,9,45,"extractError"],[7,59,9,4],[9,0,11,4],[9,10,11,8,"request"],[9,17,11,15],[9,18,11,16,"operation"],[9,27,11,8],[9,32,11,30],[9,46,11,4],[9,48,11,46],[10,0,12,6,"request"],[10,8,12,6,"request"],[10,15,12,13],[10,16,12,14,"onAsync"],[10,23,12,6],[10,24,12,22],[10,34,12,6],[10,36,12,34],[10,41,12,39,"buildCopySnapshotPresignedUrl"],[10,70,12,6],[11,0,13,5],[12,0,14,3],[12,5,3,35],[13,0,19,2,"buildCopySnapshotPresignedUrl"],[13,4,19,2,"buildCopySnapshotPresignedUrl"],[13,33,19,31],[13,35,19,33],[13,44,19,42,"buildCopySnapshotPresignedUrl"],[13,73,19,33],[13,74,19,72,"req"],[13,77,19,33],[13,79,19,77,"done"],[13,83,19,33],[13,85,19,83],[14,0,20,4],[14,10,20,8,"req"],[14,13,20,11],[14,14,20,12,"params"],[14,20,20,8],[14,21,20,19,"PresignedUrl"],[14,33,20,8],[14,37,20,35,"req"],[14,40,20,38],[14,41,20,39,"_subRequest"],[14,52,20,4],[14,54,20,52],[15,0,21,6],[15,15,21,13,"done"],[15,19,21,17],[15,21,21,6],[16,0,22,5],[18,0,24,4,"req"],[18,6,24,4,"req"],[18,9,24,7],[18,10,24,8,"params"],[18,16,24,4],[18,19,24,17,"AWS"],[18,22,24,20],[18,23,24,21,"util"],[18,27,24,17],[18,28,24,26,"copy"],[18,32,24,17],[18,33,24,31,"req"],[18,36,24,34],[18,37,24,35,"params"],[18,43,24,17],[18,44,24,4],[19,0,25,4,"req"],[19,6,25,4,"req"],[19,9,25,7],[19,10,25,8,"params"],[19,16,25,4],[19,17,25,15,"DestinationRegion"],[19,34,25,4],[19,37,25,35,"req"],[19,40,25,38],[19,41,25,39,"service"],[19,48,25,35],[19,49,25,47,"config"],[19,55,25,35],[19,56,25,54,"region"],[19,62,25,4],[20,0,27,4],[20,10,27,8,"config"],[20,16,27,14],[20,19,27,17,"AWS"],[20,22,27,20],[20,23,27,21,"util"],[20,27,27,17],[20,28,27,26,"copy"],[20,32,27,17],[20,33,27,31,"req"],[20,36,27,34],[20,37,27,35,"service"],[20,44,27,31],[20,45,27,43,"config"],[20,51,27,17],[20,52,27,4],[21,0,28,4],[21,13,28,11,"config"],[21,19,28,17],[21,20,28,18,"endpoint"],[21,28,28,4],[22,0,29,4,"config"],[22,6,29,4,"config"],[22,12,29,10],[22,13,29,11,"region"],[22,19,29,4],[22,22,29,20,"req"],[22,25,29,23],[22,26,29,24,"params"],[22,32,29,20],[22,33,29,31,"SourceRegion"],[22,45,29,4],[23,0,30,4],[23,10,30,8,"svc"],[23,13,30,11],[23,16,30,14],[23,20,30,18,"req"],[23,23,30,21],[23,24,30,22,"service"],[23,31,30,18],[23,32,30,30,"constructor"],[23,43,30,14],[23,44,30,42,"config"],[23,50,30,14],[23,51,30,4],[24,0,31,4],[24,10,31,8,"newReq"],[24,16,31,14],[24,19,31,17,"svc"],[24,22,31,20],[24,23,31,21,"req"],[24,26,31,24],[24,27,31,25,"operation"],[24,36,31,20],[24,37,31,17],[24,38,31,36,"req"],[24,41,31,39],[24,42,31,40,"params"],[24,48,31,17],[24,49,31,4],[25,0,32,4,"newReq"],[25,6,32,4,"newReq"],[25,12,32,10],[25,13,32,11,"_subRequest"],[25,24,32,4],[25,27,32,25],[25,31,32,4],[26,0,33,4,"newReq"],[26,6,33,4,"newReq"],[26,12,33,10],[26,13,33,11,"presign"],[26,20,33,4],[26,21,33,19],[26,31,33,28,"err"],[26,34,33,19],[26,36,33,33,"url"],[26,39,33,19],[26,41,33,38],[27,0,34,6],[27,12,34,10,"err"],[27,15,34,6],[27,17,34,15,"done"],[27,21,34,19],[27,22,34,20,"err"],[27,25,34,19],[27,26,34,15],[27,27,34,6],[27,32,35,11],[28,0,36,8,"req"],[28,10,36,8,"req"],[28,13,36,11],[28,14,36,12,"params"],[28,20,36,8],[28,21,36,19,"PresignedUrl"],[28,33,36,8],[28,36,36,34,"url"],[28,39,36,8],[29,0,37,8,"done"],[29,10,37,8,"done"],[29,14,37,12],[30,0,38,7],[31,0,39,5],[31,7,33,4],[32,0,40,3],[32,5,3,35],[33,0,45,2,"extractError"],[33,4,45,2,"extractError"],[33,16,45,14],[33,18,45,16],[33,27,45,25,"extractError"],[33,39,45,16],[33,40,45,38,"resp"],[33,44,45,16],[33,46,45,44],[34,0,47,4],[34,10,47,8,"httpResponse"],[34,22,47,20],[34,25,47,23,"resp"],[34,29,47,27],[34,30,47,28,"httpResponse"],[34,42,47,4],[35,0,48,4],[35,10,48,8,"data"],[35,14,48,12],[35,17,48,15],[35,21,48,19,"AWS"],[35,24,48,22],[35,25,48,23,"XML"],[35,28,48,19],[35,29,48,27,"Parser"],[35,35,48,15],[35,38,48,36,"parse"],[35,43,48,15],[35,44,48,42,"httpResponse"],[35,56,48,54],[35,57,48,55,"body"],[35,61,48,42],[35,62,48,60,"toString"],[35,70,48,42],[35,76,48,74],[35,78,48,15],[35,79,48,4],[37,0,49,4],[37,10,49,8,"data"],[37,14,49,12],[37,15,49,13,"Errors"],[37,21,49,4],[37,23,49,21],[38,0,50,6,"resp"],[38,8,50,6,"resp"],[38,12,50,10],[38,13,50,11,"error"],[38,18,50,6],[38,21,50,19,"AWS"],[38,24,50,22],[38,25,50,23,"util"],[38,29,50,19],[38,30,50,28,"error"],[38,35,50,19],[38,36,50,34],[38,40,50,38,"Error"],[38,45,50,34],[38,47,50,19],[38,49,50,47],[39,0,51,8,"code"],[39,10,51,8,"code"],[39,14,51,12],[39,16,51,14,"data"],[39,20,51,18],[39,21,51,19,"Errors"],[39,27,51,14],[39,28,51,26,"Error"],[39,33,51,14],[39,34,51,32,"Code"],[39,38,50,47],[40,0,52,8,"message"],[40,10,52,8,"message"],[40,17,52,15],[40,19,52,17,"data"],[40,23,52,21],[40,24,52,22,"Errors"],[40,30,52,17],[40,31,52,29,"Error"],[40,36,52,17],[40,37,52,35,"Message"],[41,0,50,47],[41,9,50,19],[41,10,50,6],[42,0,54,5],[42,7,49,4],[42,13,54,11],[43,0,55,6,"resp"],[43,8,55,6,"resp"],[43,12,55,10],[43,13,55,11,"error"],[43,18,55,6],[43,21,55,19,"AWS"],[43,24,55,22],[43,25,55,23,"util"],[43,29,55,19],[43,30,55,28,"error"],[43,35,55,19],[43,36,55,34],[43,40,55,38,"Error"],[43,45,55,34],[43,47,55,19],[43,49,55,47],[44,0,56,8,"code"],[44,10,56,8,"code"],[44,14,56,12],[44,16,56,14,"httpResponse"],[44,28,56,26],[44,29,56,27,"statusCode"],[44,39,55,47],[45,0,57,8,"message"],[45,10,57,8,"message"],[45,17,57,15],[45,19,57,17],[46,0,55,47],[46,9,55,19],[46,10,55,6],[47,0,59,5],[49,0,60,4,"resp"],[49,6,60,4,"resp"],[49,10,60,8],[49,11,60,9,"error"],[49,16,60,4],[49,17,60,15,"requestId"],[49,26,60,4],[49,29,60,27,"data"],[49,33,60,31],[49,34,60,32,"RequestID"],[49,43,60,27],[49,47,60,45],[49,51,60,4],[50,0,61,3],[51,0,3,35],[51,3,3,0]]},"type":"js/module"}]}