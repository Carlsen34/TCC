{"dependencies":[{"name":"./Analytics","data":{"isAsync":false}},{"name":"../Common","data":{"isAsync":false}},{"name":"../Common/Platform","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var Analytics_1 = _$$_REQUIRE(_dependencyMap[0], \"./Analytics\");\n\n  exports.AnalyticsClass = Analytics_1.default;\n\n  var Common_1 = _$$_REQUIRE(_dependencyMap[1], \"../Common\");\n\n  var Platform_1 = _$$_REQUIRE(_dependencyMap[2], \"../Common/Platform\");\n\n  var logger = new Common_1.ConsoleLogger('Analytics');\n  var startsessionRecorded = false;\n  var _instance = null;\n\n  if (!_instance) {\n    logger.debug('Create Analytics Instance');\n    _instance = new Analytics_1.default();\n  }\n\n  var Analytics = _instance;\n  exports.default = Analytics;\n\n  var dispatchAppStateEvent = function dispatchAppStateEvent(event, data) {\n    Common_1.Hub.dispatch('appState', {\n      event: event,\n      data: data\n    }, 'AppState');\n  };\n\n  if (Platform_1.default.isReactNative) {\n    Common_1.AppState.addEventListener('change', function (nextAppState) {\n      switch (nextAppState) {\n        case 'active':\n          dispatchAppStateEvent('active', {});\n      }\n    });\n  }\n\n  Analytics.onHubCapsule = function (capsule) {\n    var channel = capsule.channel,\n        payload = capsule.payload,\n        source = capsule.source;\n    logger.debug('on hub capsule ' + channel, payload);\n\n    switch (channel) {\n      case 'auth':\n        authEvent(payload);\n        break;\n\n      case 'storage':\n        storageEvent(payload);\n        break;\n\n      case 'analytics':\n        analyticsEvent(payload);\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  var storageEvent = function storageEvent(payload) {\n    var attrs = payload.attrs,\n        metrics = payload.metrics;\n    if (!attrs) return;\n    Analytics.record('Storage', attrs, metrics);\n  };\n\n  var authEvent = function authEvent(payload) {\n    var event = payload.event;\n\n    if (!event) {\n      return;\n    }\n\n    switch (event) {\n      case 'signIn':\n        Analytics.record('_userauth.sign_in');\n        break;\n\n      case 'signUp':\n        Analytics.record('_userauth.sign_up');\n        break;\n\n      case 'signOut':\n        break;\n\n      case 'signIn_failure':\n        Analytics.record('_userauth.auth_fail');\n        break;\n\n      case 'configured':\n        if (!startsessionRecorded) {\n          startsessionRecorded = true;\n          Common_1.Hub.dispatch('analytics', {\n            eventType: 'session_start'\n          }, 'Analytics');\n        }\n\n        break;\n    }\n  };\n\n  var analyticsEvent = function analyticsEvent(payload) {\n    var eventType = payload.eventType;\n    if (!eventType) return;\n\n    switch (eventType) {\n      case 'session_start':\n        Analytics.startSession();\n        break;\n    }\n  };\n\n  Common_1.Hub.listen('auth', Analytics);\n  Common_1.Hub.listen('storage', Analytics);\n  Common_1.Hub.listen('analytics', Analytics);\n});","map":[[2,0,1,0],[4,0,14,0,"Object"],[4,2,14,0,"Object"],[4,8,14,6],[4,9,14,7,"defineProperty"],[4,23,14,0],[4,24,14,22,"exports"],[4,31,14,0],[4,33,14,31],[4,45,14,0],[4,47,14,45],[5,0,14,47,"value"],[5,4,14,47,"value"],[5,9,14,52],[5,11,14,54],[6,0,14,45],[6,3,14,0],[8,0,15,0],[8,6,15,4,"Analytics_1"],[8,17,15,15],[8,20,15,18,"require"],[8,31,15,25],[8,65,15,0],[10,0,16,0,"exports"],[10,2,16,0,"exports"],[10,9,16,7],[10,10,16,8,"AnalyticsClass"],[10,24,16,0],[10,27,16,25,"Analytics_1"],[10,38,16,36],[10,39,16,37,"default"],[10,46,16,0],[12,0,17,0],[12,6,17,4,"Common_1"],[12,14,17,12],[12,17,17,15,"require"],[12,28,17,22],[12,60,17,0],[14,0,18,0],[14,6,18,4,"Platform_1"],[14,16,18,14],[14,19,18,17,"require"],[14,30,18,24],[14,71,18,0],[16,0,19,0],[16,6,19,4,"logger"],[16,12,19,10],[16,15,19,13],[16,19,19,17,"Common_1"],[16,27,19,25],[16,28,19,26,"ConsoleLogger"],[16,41,19,13],[16,42,19,40],[16,53,19,13],[16,54,19,0],[17,0,20,0],[17,6,20,4,"startsessionRecorded"],[17,26,20,24],[17,29,20,27],[17,34,20,0],[18,0,21,0],[18,6,21,4,"_instance"],[18,15,21,13],[18,18,21,16],[18,22,21,0],[20,0,22,0],[20,6,22,4],[20,7,22,5,"_instance"],[20,16,22,0],[20,18,22,16],[21,0,23,4,"logger"],[21,4,23,4,"logger"],[21,10,23,10],[21,11,23,11,"debug"],[21,16,23,4],[21,17,23,17],[21,44,23,4],[22,0,24,4,"_instance"],[22,4,24,4,"_instance"],[22,13,24,13],[22,16,24,16],[22,20,24,20,"Analytics_1"],[22,31,24,31],[22,32,24,32,"default"],[22,39,24,16],[22,41,24,4],[23,0,25,1],[25,0,26,0],[25,6,26,4,"Analytics"],[25,15,26,13],[25,18,26,16,"_instance"],[25,27,26,0],[26,0,27,0,"exports"],[26,2,27,0,"exports"],[26,9,27,7],[26,10,27,8,"default"],[26,17,27,0],[26,20,27,18,"Analytics"],[26,29,27,0],[28,0,29,0],[28,6,29,4,"dispatchAppStateEvent"],[28,27,29,25],[28,30,29,28],[28,39,29,4,"dispatchAppStateEvent"],[28,60,29,28],[28,61,29,38,"event"],[28,66,29,28],[28,68,29,45,"data"],[28,72,29,28],[28,74,29,51],[29,0,30,4,"Common_1"],[29,4,30,4,"Common_1"],[29,12,30,12],[29,13,30,13,"Hub"],[29,16,30,4],[29,17,30,17,"dispatch"],[29,25,30,4],[29,26,30,26],[29,36,30,4],[29,38,30,38],[30,0,30,40,"event"],[30,6,30,40,"event"],[30,11,30,45],[30,13,30,47,"event"],[30,18,30,38],[31,0,30,54,"data"],[31,6,30,54,"data"],[31,10,30,58],[31,12,30,60,"data"],[32,0,30,38],[32,5,30,4],[32,7,30,68],[32,17,30,4],[33,0,31,1],[33,3,29,0],[35,0,32,0],[35,6,32,4,"Platform_1"],[35,16,32,14],[35,17,32,15,"default"],[35,24,32,4],[35,25,32,23,"isReactNative"],[35,38,32,0],[35,40,32,38],[36,0,33,4,"Common_1"],[36,4,33,4,"Common_1"],[36,12,33,12],[36,13,33,13,"AppState"],[36,21,33,4],[36,22,33,22,"addEventListener"],[36,38,33,4],[36,39,33,39],[36,47,33,4],[36,49,33,49],[36,59,33,59,"nextAppState"],[36,71,33,49],[36,73,33,73],[37,0,34,8],[37,14,34,16,"nextAppState"],[37,26,34,8],[38,0,35,12],[38,13,35,17],[38,21,35,12],[39,0,36,16,"dispatchAppStateEvent"],[39,10,36,16,"dispatchAppStateEvent"],[39,31,36,37],[39,32,36,38],[39,40,36,37],[39,42,36,48],[39,44,36,37],[39,45,36,16],[40,0,34,8],[41,0,38,5],[41,5,33,4],[42,0,39,1],[44,0,40,0,"Analytics"],[44,2,40,0,"Analytics"],[44,11,40,9],[44,12,40,10,"onHubCapsule"],[44,24,40,0],[44,27,40,25],[44,37,40,35,"capsule"],[44,44,40,25],[44,46,40,44],[45,0,41,4],[45,8,41,8,"channel"],[45,15,41,15],[45,18,41,18,"capsule"],[45,25,41,25],[45,26,41,26,"channel"],[45,33,41,4],[46,0,41,4],[46,8,41,35,"payload"],[46,15,41,42],[46,18,41,45,"capsule"],[46,25,41,52],[46,26,41,53,"payload"],[46,33,41,4],[47,0,41,4],[47,8,41,62,"source"],[47,14,41,68],[47,17,41,71,"capsule"],[47,24,41,78],[47,25,41,79,"source"],[47,31,41,4],[48,0,42,4,"logger"],[48,4,42,4,"logger"],[48,10,42,10],[48,11,42,11,"debug"],[48,16,42,4],[48,17,42,17],[48,37,42,37,"channel"],[48,44,42,4],[48,46,42,46,"payload"],[48,53,42,4],[50,0,43,4],[50,12,43,12,"channel"],[50,19,43,4],[51,0,44,8],[51,11,44,13],[51,17,44,8],[52,0,45,12,"authEvent"],[52,8,45,12,"authEvent"],[52,17,45,21],[52,18,45,22,"payload"],[52,25,45,21],[52,26,45,12],[53,0,46,12],[55,0,47,8],[55,11,47,13],[55,20,47,8],[56,0,48,12,"storageEvent"],[56,8,48,12,"storageEvent"],[56,20,48,24],[56,21,48,25,"payload"],[56,28,48,24],[56,29,48,12],[57,0,49,12],[59,0,50,8],[59,11,50,13],[59,22,50,8],[60,0,51,12,"analyticsEvent"],[60,8,51,12,"analyticsEvent"],[60,22,51,26],[60,23,51,27,"payload"],[60,30,51,26],[60,31,51,12],[61,0,52,12],[63,0,53,8],[64,0,54,12],[65,0,43,4],[66,0,56,1],[66,3,40,0],[68,0,57,0],[68,6,57,4,"storageEvent"],[68,18,57,16],[68,21,57,19],[68,30,57,4,"storageEvent"],[68,42,57,19],[68,43,57,29,"payload"],[68,50,57,19],[68,52,57,38],[69,0,58,4],[69,8,58,8,"attrs"],[69,13,58,13],[69,16,58,16,"payload"],[69,23,58,23],[69,24,58,24,"attrs"],[69,29,58,4],[70,0,58,4],[70,8,58,31,"metrics"],[70,15,58,38],[70,18,58,41,"payload"],[70,25,58,48],[70,26,58,49,"metrics"],[70,33,58,4],[71,0,59,4],[71,8,59,8],[71,9,59,9,"attrs"],[71,14,59,4],[71,16,60,8],[72,0,61,4,"Analytics"],[72,4,61,4,"Analytics"],[72,13,61,13],[72,14,61,14,"record"],[72,20,61,4],[72,21,61,21],[72,30,61,4],[72,32,61,32,"attrs"],[72,37,61,4],[72,39,61,39,"metrics"],[72,46,61,4],[73,0,62,1],[73,3,57,0],[75,0,63,0],[75,6,63,4,"authEvent"],[75,15,63,13],[75,18,63,16],[75,27,63,4,"authEvent"],[75,36,63,16],[75,37,63,26,"payload"],[75,44,63,16],[75,46,63,35],[76,0,64,4],[76,8,64,8,"event"],[76,13,64,13],[76,16,64,16,"payload"],[76,23,64,23],[76,24,64,24,"event"],[76,29,64,4],[78,0,65,4],[78,8,65,8],[78,9,65,9,"event"],[78,14,65,4],[78,16,65,16],[79,0,66,8],[80,0,67,5],[82,0,68,4],[82,12,68,12,"event"],[82,17,68,4],[83,0,69,8],[83,11,69,13],[83,19,69,8],[84,0,70,12,"Analytics"],[84,8,70,12,"Analytics"],[84,17,70,21],[84,18,70,22,"record"],[84,24,70,12],[84,25,70,29],[84,44,70,12],[85,0,71,12],[87,0,72,8],[87,11,72,13],[87,19,72,8],[88,0,73,12,"Analytics"],[88,8,73,12,"Analytics"],[88,17,73,21],[88,18,73,22,"record"],[88,24,73,12],[88,25,73,29],[88,44,73,12],[89,0,74,12],[91,0,75,8],[91,11,75,13],[91,20,75,8],[92,0,76,12],[94,0,77,8],[94,11,77,13],[94,27,77,8],[95,0,78,12,"Analytics"],[95,8,78,12,"Analytics"],[95,17,78,21],[95,18,78,22,"record"],[95,24,78,12],[95,25,78,29],[95,46,78,12],[96,0,79,12],[98,0,80,8],[98,11,80,13],[98,23,80,8],[99,0,81,12],[99,12,81,16],[99,13,81,17,"startsessionRecorded"],[99,33,81,12],[99,35,81,39],[100,0,82,16,"startsessionRecorded"],[100,10,82,16,"startsessionRecorded"],[100,30,82,36],[100,33,82,39],[100,37,82,16],[101,0,83,16,"Common_1"],[101,10,83,16,"Common_1"],[101,18,83,24],[101,19,83,25,"Hub"],[101,22,83,16],[101,23,83,29,"dispatch"],[101,31,83,16],[101,32,83,38],[101,43,83,16],[101,45,83,51],[102,0,83,53,"eventType"],[102,12,83,53,"eventType"],[102,21,83,62],[102,23,83,64],[103,0,83,51],[103,11,83,16],[103,13,83,83],[103,24,83,16],[104,0,84,13],[106,0,85,12],[107,0,68,4],[108,0,87,1],[108,3,63,0],[110,0,88,0],[110,6,88,4,"analyticsEvent"],[110,20,88,18],[110,23,88,21],[110,32,88,4,"analyticsEvent"],[110,46,88,21],[110,47,88,31,"payload"],[110,54,88,21],[110,56,88,40],[111,0,89,4],[111,8,89,8,"eventType"],[111,17,89,17],[111,20,89,20,"payload"],[111,27,89,27],[111,28,89,28,"eventType"],[111,37,89,4],[112,0,90,4],[112,8,90,8],[112,9,90,9,"eventType"],[112,18,90,4],[112,20,91,8],[114,0,92,4],[114,12,92,12,"eventType"],[114,21,92,4],[115,0,93,8],[115,11,93,13],[115,26,93,8],[116,0,94,12,"Analytics"],[116,8,94,12,"Analytics"],[116,17,94,21],[116,18,94,22,"startSession"],[116,30,94,12],[117,0,95,12],[118,0,92,4],[119,0,97,1],[119,3,88,0],[121,0,98,0,"Common_1"],[121,2,98,0,"Common_1"],[121,10,98,8],[121,11,98,9,"Hub"],[121,14,98,0],[121,15,98,13,"listen"],[121,21,98,0],[121,22,98,20],[121,28,98,0],[121,30,98,28,"Analytics"],[121,39,98,0],[122,0,99,0,"Common_1"],[122,2,99,0,"Common_1"],[122,10,99,8],[122,11,99,9,"Hub"],[122,14,99,0],[122,15,99,13,"listen"],[122,21,99,0],[122,22,99,20],[122,31,99,0],[122,33,99,31,"Analytics"],[122,42,99,0],[123,0,100,0,"Common_1"],[123,2,100,0,"Common_1"],[123,10,100,8],[123,11,100,9,"Hub"],[123,14,100,0],[123,15,100,13,"listen"],[123,21,100,0],[123,22,100,20],[123,33,100,0],[123,35,100,33,"Analytics"],[123,44,100,0]]},"type":"js/module"}]}