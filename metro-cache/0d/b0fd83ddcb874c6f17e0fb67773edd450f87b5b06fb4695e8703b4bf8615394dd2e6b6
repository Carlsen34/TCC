{"dependencies":[{"name":"../core","data":{"isAsync":false}},{"name":"./converter","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var util = _$$_REQUIRE(_dependencyMap[0], \"../core\").util;\n\n  var convert = _$$_REQUIRE(_dependencyMap[1], \"./converter\");\n\n  var Translator = function Translator(options) {\n    options = options || {};\n    this.attrValue = options.attrValue;\n    this.convertEmptyValues = Boolean(options.convertEmptyValues);\n    this.wrapNumbers = Boolean(options.wrapNumbers);\n  };\n\n  Translator.prototype.translateInput = function (value, shape) {\n    this.mode = 'input';\n    return this.translate(value, shape);\n  };\n\n  Translator.prototype.translateOutput = function (value, shape) {\n    this.mode = 'output';\n    return this.translate(value, shape);\n  };\n\n  Translator.prototype.translate = function (value, shape) {\n    var self = this;\n    if (!shape || value === undefined) return undefined;\n\n    if (shape.shape === self.attrValue) {\n      return convert[self.mode](value, {\n        convertEmptyValues: self.convertEmptyValues,\n        wrapNumbers: self.wrapNumbers\n      });\n    }\n\n    switch (shape.type) {\n      case 'structure':\n        return self.translateStructure(value, shape);\n\n      case 'map':\n        return self.translateMap(value, shape);\n\n      case 'list':\n        return self.translateList(value, shape);\n\n      default:\n        return self.translateScalar(value, shape);\n    }\n  };\n\n  Translator.prototype.translateStructure = function (structure, shape) {\n    var self = this;\n    if (structure == null) return undefined;\n    var struct = {};\n    util.each(structure, function (name, value) {\n      var memberShape = shape.members[name];\n\n      if (memberShape) {\n        var result = self.translate(value, memberShape);\n        if (result !== undefined) struct[name] = result;\n      }\n    });\n    return struct;\n  };\n\n  Translator.prototype.translateList = function (list, shape) {\n    var self = this;\n    if (list == null) return undefined;\n    var out = [];\n    util.arrayEach(list, function (value) {\n      var result = self.translate(value, shape.member);\n      if (result === undefined) out.push(null);else out.push(result);\n    });\n    return out;\n  };\n\n  Translator.prototype.translateMap = function (map, shape) {\n    var self = this;\n    if (map == null) return undefined;\n    var out = {};\n    util.each(map, function (key, value) {\n      var result = self.translate(value, shape.value);\n      if (result === undefined) out[key] = null;else out[key] = result;\n    });\n    return out;\n  };\n\n  Translator.prototype.translateScalar = function (value, shape) {\n    return shape.toType(value);\n  };\n\n  module.exports = Translator;\n});","map":[[2,0,1,0],[2,6,1,4,"util"],[2,10,1,8],[2,13,1,11,"require"],[2,24,1,18],[2,54,1,11],[2,55,1,30,"util"],[2,59,1,0],[4,0,2,0],[4,6,2,4,"convert"],[4,13,2,11],[4,16,2,14,"require"],[4,27,2,21],[4,61,2,0],[6,0,4,0],[6,6,4,4,"Translator"],[6,16,4,14],[6,19,4,17],[6,28,4,4,"Translator"],[6,38,4,17],[6,39,4,26,"options"],[6,46,4,17],[6,48,4,35],[7,0,5,2,"options"],[7,4,5,2,"options"],[7,11,5,9],[7,14,5,12,"options"],[7,21,5,19],[7,25,5,23],[7,27,5,2],[8,0,6,2],[8,9,6,7,"attrValue"],[8,18,6,2],[8,21,6,19,"options"],[8,28,6,26],[8,29,6,27,"attrValue"],[8,38,6,2],[9,0,7,2],[9,9,7,7,"convertEmptyValues"],[9,27,7,2],[9,30,7,28,"Boolean"],[9,37,7,35],[9,38,7,36,"options"],[9,45,7,43],[9,46,7,44,"convertEmptyValues"],[9,64,7,35],[9,65,7,2],[10,0,8,2],[10,9,8,7,"wrapNumbers"],[10,20,8,2],[10,23,8,21,"Boolean"],[10,30,8,28],[10,31,8,29,"options"],[10,38,8,36],[10,39,8,37,"wrapNumbers"],[10,50,8,28],[10,51,8,2],[11,0,9,1],[11,3,4,0],[13,0,11,0,"Translator"],[13,2,11,0,"Translator"],[13,12,11,10],[13,13,11,11,"prototype"],[13,22,11,0],[13,23,11,21,"translateInput"],[13,37,11,0],[13,40,11,38],[13,50,11,47,"value"],[13,55,11,38],[13,57,11,54,"shape"],[13,62,11,38],[13,64,11,61],[14,0,12,2],[14,9,12,7,"mode"],[14,13,12,2],[14,16,12,14],[14,23,12,2],[15,0,13,2],[15,11,13,9],[15,16,13,14,"translate"],[15,25,13,9],[15,26,13,24,"value"],[15,31,13,9],[15,33,13,31,"shape"],[15,38,13,9],[15,39,13,2],[16,0,14,1],[16,3,11,0],[18,0,16,0,"Translator"],[18,2,16,0,"Translator"],[18,12,16,10],[18,13,16,11,"prototype"],[18,22,16,0],[18,23,16,21,"translateOutput"],[18,38,16,0],[18,41,16,39],[18,51,16,48,"value"],[18,56,16,39],[18,58,16,55,"shape"],[18,63,16,39],[18,65,16,62],[19,0,17,2],[19,9,17,7,"mode"],[19,13,17,2],[19,16,17,14],[19,24,17,2],[20,0,18,2],[20,11,18,9],[20,16,18,14,"translate"],[20,25,18,9],[20,26,18,24,"value"],[20,31,18,9],[20,33,18,31,"shape"],[20,38,18,9],[20,39,18,2],[21,0,19,1],[21,3,16,0],[23,0,21,0,"Translator"],[23,2,21,0,"Translator"],[23,12,21,10],[23,13,21,11,"prototype"],[23,22,21,0],[23,23,21,21,"translate"],[23,32,21,0],[23,35,21,33],[23,45,21,42,"value"],[23,50,21,33],[23,52,21,49,"shape"],[23,57,21,33],[23,59,21,56],[24,0,22,2],[24,8,22,6,"self"],[24,12,22,10],[24,15,22,13],[24,19,22,2],[25,0,23,2],[25,8,23,6],[25,9,23,7,"shape"],[25,14,23,6],[25,18,23,16,"value"],[25,23,23,21],[25,28,23,26,"undefined"],[25,37,23,2],[25,39,23,37],[25,46,23,44,"undefined"],[25,55,23,37],[27,0,25,2],[27,8,25,6,"shape"],[27,13,25,11],[27,14,25,12,"shape"],[27,19,25,6],[27,24,25,22,"self"],[27,28,25,26],[27,29,25,27,"attrValue"],[27,38,25,2],[27,40,25,38],[28,0,26,4],[28,13,26,11,"convert"],[28,20,26,18],[28,21,26,19,"self"],[28,25,26,23],[28,26,26,24,"mode"],[28,30,26,18],[28,31,26,11],[28,32,26,30,"value"],[28,37,26,11],[28,39,26,37],[29,0,27,6,"convertEmptyValues"],[29,8,27,6,"convertEmptyValues"],[29,26,27,24],[29,28,27,26,"self"],[29,32,27,30],[29,33,27,31,"convertEmptyValues"],[29,51,26,37],[30,0,28,6,"wrapNumbers"],[30,8,28,6,"wrapNumbers"],[30,19,28,17],[30,21,28,19,"self"],[30,25,28,23],[30,26,28,24,"wrapNumbers"],[31,0,26,37],[31,7,26,11],[31,8,26,4],[32,0,30,3],[34,0,31,2],[34,12,31,10,"shape"],[34,17,31,15],[34,18,31,16,"type"],[34,22,31,2],[35,0,32,4],[35,11,32,9],[35,22,32,4],[36,0,32,22],[36,15,32,29,"self"],[36,19,32,33],[36,20,32,34,"translateStructure"],[36,38,32,29],[36,39,32,53,"value"],[36,44,32,29],[36,46,32,60,"shape"],[36,51,32,29],[36,52,32,22],[38,0,33,4],[38,11,33,9],[38,16,33,4],[39,0,33,16],[39,15,33,23,"self"],[39,19,33,27],[39,20,33,28,"translateMap"],[39,32,33,23],[39,33,33,41,"value"],[39,38,33,23],[39,40,33,48,"shape"],[39,45,33,23],[39,46,33,16],[41,0,34,4],[41,11,34,9],[41,17,34,4],[42,0,34,17],[42,15,34,24,"self"],[42,19,34,28],[42,20,34,29,"translateList"],[42,33,34,24],[42,34,34,43,"value"],[42,39,34,24],[42,41,34,50,"shape"],[42,46,34,24],[42,47,34,17],[44,0,35,4],[45,0,35,13],[45,15,35,20,"self"],[45,19,35,24],[45,20,35,25,"translateScalar"],[45,35,35,20],[45,36,35,41,"value"],[45,41,35,20],[45,43,35,48,"shape"],[45,48,35,20],[45,49,35,13],[46,0,31,2],[47,0,37,1],[47,3,21,0],[49,0,39,0,"Translator"],[49,2,39,0,"Translator"],[49,12,39,10],[49,13,39,11,"prototype"],[49,22,39,0],[49,23,39,21,"translateStructure"],[49,41,39,0],[49,44,39,42],[49,54,39,51,"structure"],[49,63,39,42],[49,65,39,62,"shape"],[49,70,39,42],[49,72,39,69],[50,0,40,2],[50,8,40,6,"self"],[50,12,40,10],[50,15,40,13],[50,19,40,2],[51,0,41,2],[51,8,41,6,"structure"],[51,17,41,15],[51,21,41,19],[51,25,41,2],[51,27,41,25],[51,34,41,32,"undefined"],[51,43,41,25],[52,0,43,2],[52,8,43,6,"struct"],[52,14,43,12],[52,17,43,15],[52,19,43,2],[53,0,44,2,"util"],[53,4,44,2,"util"],[53,8,44,6],[53,9,44,7,"each"],[53,13,44,2],[53,14,44,12,"structure"],[53,23,44,2],[53,25,44,23],[53,35,44,32,"name"],[53,39,44,23],[53,41,44,38,"value"],[53,46,44,23],[53,48,44,45],[54,0,45,4],[54,10,45,8,"memberShape"],[54,21,45,19],[54,24,45,22,"shape"],[54,29,45,27],[54,30,45,28,"members"],[54,37,45,22],[54,38,45,36,"name"],[54,42,45,22],[54,43,45,4],[56,0,46,4],[56,10,46,8,"memberShape"],[56,21,46,4],[56,23,46,21],[57,0,47,6],[57,12,47,10,"result"],[57,18,47,16],[57,21,47,19,"self"],[57,25,47,23],[57,26,47,24,"translate"],[57,35,47,19],[57,36,47,34,"value"],[57,41,47,19],[57,43,47,41,"memberShape"],[57,54,47,19],[57,55,47,6],[58,0,48,6],[58,12,48,10,"result"],[58,18,48,16],[58,23,48,21,"undefined"],[58,32,48,6],[58,34,48,32,"struct"],[58,40,48,38],[58,41,48,39,"name"],[58,45,48,38],[58,46,48,32],[58,49,48,47,"result"],[58,55,48,32],[59,0,49,5],[60,0,50,3],[60,5,44,2],[61,0,51,2],[61,11,51,9,"struct"],[61,17,51,2],[62,0,52,1],[62,3,39,0],[64,0,54,0,"Translator"],[64,2,54,0,"Translator"],[64,12,54,10],[64,13,54,11,"prototype"],[64,22,54,0],[64,23,54,21,"translateList"],[64,36,54,0],[64,39,54,37],[64,49,54,46,"list"],[64,53,54,37],[64,55,54,52,"shape"],[64,60,54,37],[64,62,54,59],[65,0,55,2],[65,8,55,6,"self"],[65,12,55,10],[65,15,55,13],[65,19,55,2],[66,0,56,2],[66,8,56,6,"list"],[66,12,56,10],[66,16,56,14],[66,20,56,2],[66,22,56,20],[66,29,56,27,"undefined"],[66,38,56,20],[67,0,58,2],[67,8,58,6,"out"],[67,11,58,9],[67,14,58,12],[67,16,58,2],[68,0,59,2,"util"],[68,4,59,2,"util"],[68,8,59,6],[68,9,59,7,"arrayEach"],[68,18,59,2],[68,19,59,17,"list"],[68,23,59,2],[68,25,59,23],[68,35,59,32,"value"],[68,40,59,23],[68,42,59,39],[69,0,60,4],[69,10,60,8,"result"],[69,16,60,14],[69,19,60,17,"self"],[69,23,60,21],[69,24,60,22,"translate"],[69,33,60,17],[69,34,60,32,"value"],[69,39,60,17],[69,41,60,39,"shape"],[69,46,60,44],[69,47,60,45,"member"],[69,53,60,17],[69,54,60,4],[70,0,61,4],[70,10,61,8,"result"],[70,16,61,14],[70,21,61,19,"undefined"],[70,30,61,4],[70,32,61,30,"out"],[70,35,61,33],[70,36,61,34,"push"],[70,40,61,30],[70,41,61,39],[70,45,61,30],[70,47,61,4],[70,52,62,9,"out"],[70,55,62,12],[70,56,62,13,"push"],[70,60,62,9],[70,61,62,18,"result"],[70,67,62,9],[71,0,63,3],[71,5,59,2],[72,0,64,2],[72,11,64,9,"out"],[72,14,64,2],[73,0,65,1],[73,3,54,0],[75,0,67,0,"Translator"],[75,2,67,0,"Translator"],[75,12,67,10],[75,13,67,11,"prototype"],[75,22,67,0],[75,23,67,21,"translateMap"],[75,35,67,0],[75,38,67,36],[75,48,67,45,"map"],[75,51,67,36],[75,53,67,50,"shape"],[75,58,67,36],[75,60,67,57],[76,0,68,2],[76,8,68,6,"self"],[76,12,68,10],[76,15,68,13],[76,19,68,2],[77,0,69,2],[77,8,69,6,"map"],[77,11,69,9],[77,15,69,13],[77,19,69,2],[77,21,69,19],[77,28,69,26,"undefined"],[77,37,69,19],[78,0,71,2],[78,8,71,6,"out"],[78,11,71,9],[78,14,71,12],[78,16,71,2],[79,0,72,2,"util"],[79,4,72,2,"util"],[79,8,72,6],[79,9,72,7,"each"],[79,13,72,2],[79,14,72,12,"map"],[79,17,72,2],[79,19,72,17],[79,29,72,26,"key"],[79,32,72,17],[79,34,72,31,"value"],[79,39,72,17],[79,41,72,38],[80,0,73,4],[80,10,73,8,"result"],[80,16,73,14],[80,19,73,17,"self"],[80,23,73,21],[80,24,73,22,"translate"],[80,33,73,17],[80,34,73,32,"value"],[80,39,73,17],[80,41,73,39,"shape"],[80,46,73,44],[80,47,73,45,"value"],[80,52,73,17],[80,53,73,4],[81,0,74,4],[81,10,74,8,"result"],[81,16,74,14],[81,21,74,19,"undefined"],[81,30,74,4],[81,32,74,30,"out"],[81,35,74,33],[81,36,74,34,"key"],[81,39,74,33],[81,40,74,30],[81,43,74,41],[81,47,74,30],[81,48,74,4],[81,53,75,9,"out"],[81,56,75,12],[81,57,75,13,"key"],[81,60,75,12],[81,61,75,9],[81,64,75,20,"result"],[81,70,75,9],[82,0,76,3],[82,5,72,2],[83,0,77,2],[83,11,77,9,"out"],[83,14,77,2],[84,0,78,1],[84,3,67,0],[86,0,80,0,"Translator"],[86,2,80,0,"Translator"],[86,12,80,10],[86,13,80,11,"prototype"],[86,22,80,0],[86,23,80,21,"translateScalar"],[86,38,80,0],[86,41,80,39],[86,51,80,48,"value"],[86,56,80,39],[86,58,80,55,"shape"],[86,63,80,39],[86,65,80,62],[87,0,81,2],[87,11,81,9,"shape"],[87,16,81,14],[87,17,81,15,"toType"],[87,23,81,9],[87,24,81,22,"value"],[87,29,81,9],[87,30,81,2],[88,0,82,1],[88,3,80,0],[90,0,87,0,"module"],[90,2,87,0,"module"],[90,8,87,6],[90,9,87,7,"exports"],[90,16,87,0],[90,19,87,17,"Translator"],[90,29,87,0]]},"type":"js/module"}]}