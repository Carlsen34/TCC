{"dependencies":[{"name":"../../Common","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n\n  var Common_1 = _$$_REQUIRE(_dependencyMap[0], \"../../Common\");\n\n  var logger = new Common_1.ConsoleLogger('CognitoCredentials');\n\n  var FacebookOAuth = function () {\n    function FacebookOAuth() {}\n\n    FacebookOAuth.prototype.refreshFacebookToken = function () {\n      var fb = window['FB'];\n\n      if (!fb) {\n        logger.debug('no fb sdk available');\n        return Promise.reject('no fb sdk available');\n      }\n\n      return new Promise(function (res, rej) {\n        fb.login(function (fbResponse) {\n          if (!fbResponse || !fbResponse.authResponse) {\n            logger.debug('no response from facebook when refreshing the jwt token');\n            rej('no response from facebook when refreshing the jwt token');\n          }\n\n          var response = fbResponse.authResponse;\n          var accessToken = response.accessToken,\n              expiresIn = response.expiresIn;\n          var date = new Date();\n          var expires_at = expiresIn * 1000 + date.getTime();\n\n          if (!accessToken) {\n            logger.debug('the jwtToken is undefined');\n            rej('the jwtToken is undefined');\n          }\n\n          res({\n            token: accessToken,\n            expires_at: expires_at\n          });\n        }, {\n          scope: 'public_profile,email'\n        });\n      });\n    };\n\n    return FacebookOAuth;\n  }();\n\n  exports.default = FacebookOAuth;\n});","map":[[2,0,1,0],[4,0,2,0,"Object"],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,0],[4,24,2,22,"exports"],[4,31,2,0],[4,33,2,31],[4,45,2,0],[4,47,2,45],[5,0,2,47,"value"],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,0,2,45],[6,3,2,0],[8,0,15,0],[8,6,15,4,"Common_1"],[8,14,15,12],[8,17,15,15,"require"],[8,28,15,22],[8,63,15,0],[10,0,16,0],[10,6,16,4,"logger"],[10,12,16,10],[10,15,16,13],[10,19,16,17,"Common_1"],[10,27,16,25],[10,28,16,26,"ConsoleLogger"],[10,41,16,13],[10,42,16,40],[10,62,16,13],[10,63,16,0],[12,0,17,0],[12,6,17,4,"FacebookOAuth"],[12,19,17,17],[12,22,17,35],[12,34,17,47],[13,0,18,4],[13,13,18,13,"FacebookOAuth"],[13,26,18,4],[13,29,18,29],[13,30,19,5],[15,0,20,4,"FacebookOAuth"],[15,4,20,4,"FacebookOAuth"],[15,17,20,17],[15,18,20,18,"prototype"],[15,27,20,4],[15,28,20,28,"refreshFacebookToken"],[15,48,20,4],[15,51,20,51],[15,63,20,63],[16,0,21,8],[16,10,21,12,"fb"],[16,12,21,14],[16,15,21,17,"window"],[16,21,21,23],[16,22,21,24],[16,26,21,23],[16,27,21,8],[18,0,22,8],[18,10,22,12],[18,11,22,13,"fb"],[18,13,22,8],[18,15,22,17],[19,0,23,12,"logger"],[19,8,23,12,"logger"],[19,14,23,18],[19,15,23,19,"debug"],[19,20,23,12],[19,21,23,25],[19,42,23,12],[20,0,24,12],[20,15,24,19,"Promise"],[20,22,24,26],[20,23,24,27,"reject"],[20,29,24,19],[20,30,24,34],[20,51,24,19],[20,52,24,12],[21,0,25,9],[23,0,26,8],[23,13,26,15],[23,17,26,19,"Promise"],[23,24,26,15],[23,25,26,27],[23,35,26,37,"res"],[23,38,26,27],[23,40,26,42,"rej"],[23,43,26,27],[23,45,26,47],[24,0,27,12,"fb"],[24,8,27,12,"fb"],[24,10,27,14],[24,11,27,15,"login"],[24,16,27,12],[24,17,27,21],[24,27,27,31,"fbResponse"],[24,37,27,21],[24,39,27,43],[25,0,28,16],[25,14,28,20],[25,15,28,21,"fbResponse"],[25,25,28,20],[25,29,28,35],[25,30,28,36,"fbResponse"],[25,40,28,46],[25,41,28,47,"authResponse"],[25,53,28,16],[25,55,28,61],[26,0,29,20,"logger"],[26,12,29,20,"logger"],[26,18,29,26],[26,19,29,27,"debug"],[26,24,29,20],[26,25,29,33],[26,82,29,20],[27,0,30,20,"rej"],[27,12,30,20,"rej"],[27,15,30,23],[27,16,30,24],[27,73,30,23],[27,74,30,20],[28,0,31,17],[30,0,32,16],[30,14,32,20,"response"],[30,22,32,28],[30,25,32,31,"fbResponse"],[30,35,32,41],[30,36,32,42,"authResponse"],[30,48,32,16],[31,0,33,16],[31,14,33,20,"accessToken"],[31,25,33,31],[31,28,33,34,"response"],[31,36,33,42],[31,37,33,43,"accessToken"],[31,48,33,16],[32,0,33,16],[32,14,33,56,"expiresIn"],[32,23,33,65],[32,26,33,68,"response"],[32,34,33,76],[32,35,33,77,"expiresIn"],[32,44,33,16],[33,0,34,16],[33,14,34,20,"date"],[33,18,34,24],[33,21,34,27],[33,25,34,31,"Date"],[33,29,34,27],[33,31,34,16],[34,0,35,16],[34,14,35,20,"expires_at"],[34,24,35,30],[34,27,35,33,"expiresIn"],[34,36,35,42],[34,39,35,45],[34,43,35,33],[34,46,35,52,"date"],[34,50,35,56],[34,51,35,57,"getTime"],[34,58,35,52],[34,60,35,16],[36,0,36,16],[36,14,36,20],[36,15,36,21,"accessToken"],[36,26,36,16],[36,28,36,34],[37,0,37,20,"logger"],[37,12,37,20,"logger"],[37,18,37,26],[37,19,37,27,"debug"],[37,24,37,20],[37,25,37,33],[37,52,37,20],[38,0,38,20,"rej"],[38,12,38,20,"rej"],[38,15,38,23],[38,16,38,24],[38,43,38,23],[38,44,38,20],[39,0,39,17],[41,0,40,16,"res"],[41,10,40,16,"res"],[41,13,40,19],[41,14,40,20],[42,0,40,22,"token"],[42,12,40,22,"token"],[42,17,40,27],[42,19,40,29,"accessToken"],[42,30,40,20],[43,0,40,42,"expires_at"],[43,12,40,42,"expires_at"],[43,22,40,52],[43,24,40,54,"expires_at"],[44,0,40,20],[44,11,40,19],[44,12,40,16],[45,0,41,13],[45,9,27,12],[45,11,41,15],[46,0,41,17,"scope"],[46,10,41,17,"scope"],[46,15,41,22],[46,17,41,24],[47,0,41,15],[47,9,27,12],[48,0,42,9],[48,7,26,15],[48,8,26,8],[49,0,43,5],[49,5,20,4],[51,0,44,4],[51,11,44,11,"FacebookOAuth"],[51,24,44,4],[52,0,45,1],[52,3,17,35],[52,5,17,0],[54,0,46,0,"exports"],[54,2,46,0,"exports"],[54,9,46,7],[54,10,46,8,"default"],[54,17,46,0],[54,20,46,18,"FacebookOAuth"],[54,33,46,0]]},"type":"js/module"}]}