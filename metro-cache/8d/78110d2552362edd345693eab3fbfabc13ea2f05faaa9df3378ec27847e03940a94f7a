{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n\n  var _classCallCheck2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\"));\n\n  var _createClass2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/createClass\"));\n\n  var CognitoUserSession = function () {\n    function CognitoUserSession() {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          IdToken = _ref.IdToken,\n          RefreshToken = _ref.RefreshToken,\n          AccessToken = _ref.AccessToken,\n          ClockDrift = _ref.ClockDrift;\n\n      (0, _classCallCheck2.default)(this, CognitoUserSession);\n\n      if (AccessToken == null || IdToken == null) {\n        throw new Error('Id token and Access Token must be present.');\n      }\n\n      this.idToken = IdToken;\n      this.refreshToken = RefreshToken;\n      this.accessToken = AccessToken;\n      this.clockDrift = ClockDrift === undefined ? this.calculateClockDrift() : ClockDrift;\n    }\n\n    (0, _createClass2.default)(CognitoUserSession, [{\n      key: \"getIdToken\",\n      value: function getIdToken() {\n        return this.idToken;\n      }\n    }, {\n      key: \"getRefreshToken\",\n      value: function getRefreshToken() {\n        return this.refreshToken;\n      }\n    }, {\n      key: \"getAccessToken\",\n      value: function getAccessToken() {\n        return this.accessToken;\n      }\n    }, {\n      key: \"getClockDrift\",\n      value: function getClockDrift() {\n        return this.clockDrift;\n      }\n    }, {\n      key: \"calculateClockDrift\",\n      value: function calculateClockDrift() {\n        var now = Math.floor(new Date() / 1000);\n        var iat = Math.min(this.accessToken.getIssuedAt(), this.idToken.getIssuedAt());\n        return now - iat;\n      }\n    }, {\n      key: \"isValid\",\n      value: function isValid() {\n        var now = Math.floor(new Date() / 1000);\n        var adjusted = now - this.clockDrift;\n        return adjusted < this.accessToken.getExpiration() && adjusted < this.idToken.getExpiration();\n      }\n    }]);\n    return CognitoUserSession;\n  }();\n\n  exports.default = CognitoUserSession;\n});","map":[[13,6,19,21,"CognitoUserSession"],[13,24],[14,0,27,2],[14,34,27,71],[15,0,27,71],[15,85,27,67],[15,87,27,71],[16,0,27,71],[16,10,27,16,"IdToken"],[16,17,27,71],[16,25,27,16,"IdToken"],[16,32,27,71],[17,0,27,71],[17,10,27,25,"RefreshToken"],[17,22,27,71],[17,30,27,25,"RefreshToken"],[17,42,27,71],[18,0,27,71],[18,10,27,39,"AccessToken"],[18,21,27,71],[18,29,27,39,"AccessToken"],[18,40,27,71],[19,0,27,71],[19,10,27,52,"ClockDrift"],[19,20,27,71],[19,28,27,52,"ClockDrift"],[19,38,27,71],[21,0,27,71],[23,0,28,4],[23,10,28,8,"AccessToken"],[23,21,28,19],[23,25,28,23],[23,29,28,8],[23,33,28,31,"IdToken"],[23,40,28,38],[23,44,28,42],[23,48,28,4],[23,50,28,48],[24,0,29,6],[24,14,29,12],[24,18,29,16,"Error"],[24,23,29,12],[24,24,29,22],[24,68,29,12],[24,69,29,6],[25,0,30,5],[27,0,32,4],[27,11,32,9,"idToken"],[27,18,32,4],[27,21,32,19,"IdToken"],[27,28,32,4],[28,0,33,4],[28,11,33,9,"refreshToken"],[28,23,33,4],[28,26,33,24,"RefreshToken"],[28,38,33,4],[29,0,34,4],[29,11,34,9,"accessToken"],[29,22,34,4],[29,25,34,23,"AccessToken"],[29,36,34,4],[30,0,35,4],[30,11,35,9,"clockDrift"],[30,21,35,4],[30,24,35,22,"ClockDrift"],[30,34,35,32],[30,39,35,37,"undefined"],[30,48,35,22],[30,51,35,49],[30,56,35,54,"calculateClockDrift"],[30,75,35,49],[30,77,35,22],[30,80,35,78,"ClockDrift"],[30,90,35,4],[31,0,36,3],[35,35,41,15],[36,0,42,4],[36,15,42,11],[36,20,42,16,"idToken"],[36,27,42,4],[37,0,43,3],[40,40,48,20],[41,0,49,4],[41,15,49,11],[41,20,49,16,"refreshToken"],[41,32,49,4],[42,0,50,3],[45,39,55,19],[46,0,56,4],[46,15,56,11],[46,20,56,16,"accessToken"],[46,31,56,4],[47,0,57,3],[50,38,62,18],[51,0,63,4],[51,15,63,11],[51,20,63,16,"clockDrift"],[51,30,63,4],[52,0,64,3],[55,44,69,24],[56,0,70,4],[56,12,70,10,"now"],[56,15,70,13],[56,18,70,16,"Math"],[56,22,70,20],[56,23,70,21,"floor"],[56,28,70,16],[56,29,70,27],[56,33,70,31,"Date"],[56,37,70,27],[56,42,70,40],[56,46,70,16],[56,47,70,4],[57,0,71,4],[57,12,71,10,"iat"],[57,15,71,13],[57,18,71,16,"Math"],[57,22,71,20],[57,23,71,21,"min"],[57,26,71,16],[57,27,71,25],[57,32,71,30,"accessToken"],[57,43,71,25],[57,44,71,42,"getIssuedAt"],[57,55,71,25],[57,57,71,16],[57,59,71,57],[57,64,71,62,"idToken"],[57,71,71,57],[57,72,71,70,"getIssuedAt"],[57,83,71,57],[57,85,71,16],[57,86,71,4],[58,0,73,4],[58,15,73,11,"now"],[58,18,73,14],[58,21,73,17,"iat"],[58,24,73,4],[59,0,74,3],[62,32,81,12],[63,0,82,4],[63,12,82,10,"now"],[63,15,82,13],[63,18,82,16,"Math"],[63,22,82,20],[63,23,82,21,"floor"],[63,28,82,16],[63,29,82,27],[63,33,82,31,"Date"],[63,37,82,27],[63,42,82,40],[63,46,82,16],[63,47,82,4],[64,0,83,4],[64,12,83,10,"adjusted"],[64,20,83,18],[64,23,83,21,"now"],[64,26,83,24],[64,29,83,27],[64,34,83,32,"clockDrift"],[64,44,83,4],[65,0,85,4],[65,15,85,11,"adjusted"],[65,23,85,19],[65,26,85,22],[65,31,85,27,"accessToken"],[65,42,85,22],[65,43,85,39,"getExpiration"],[65,56,85,22],[65,58,85,11],[65,62,85,58,"adjusted"],[65,70,85,66],[65,73,85,69],[65,78,85,74,"idToken"],[65,85,85,69],[65,86,85,82,"getExpiration"],[65,99,85,69],[65,101,85,4],[66,0,86,3]]},"type":"js/module"}]}